<p>config-direcciones works!</p>
<div class="mensaje" [@entradaSalidaVentana]="mensaje == ''" *ngIf="mensaje != ''">
  <div [ngClass]="exito ? 'mensaje-ok' : 'mensaje-error'" class="d-flex align-items-center justify-content-center">

    <i [ngClass]="exito ? 'fa-circle-check' : 'fa-triangle-exclamation'" class="fa-solid me-3"></i>

    <p>{{ mensaje }}</p>
  </div>
</div>

<div>
  <h3 class="titulo mb-4">Direcciones</h3>

  <div class="direcciones">

    <div class="direccion row g-0 align-items-center" *ngFor="let dir of dirsData; let i = index">

      <div class="row gx-0">
        <div class="nombre col-12 col-xl-4 f-rojo">Lugar</div>

        <input type="text" formControlName="lugar" class="valor align-middle col-12 col-xl-8 inpt" />
      </div>

      <div class="row gx-0">
        <div class="nombre col-12 col-xl-4 f-rojo">Calle</div>

        <input type="text" formControlName="calle" class="valor align-middle col-12 col-xl-8 inpt" />
      </div>

      <div class="row gx-0">
        <div class="nombre col-12 col-xl-4 f-rojo">Número</div>

        <input type="text" formControlName="numero" class="valor align-middle col-12 col-xl-8 inpt" />
      </div>

      <div class="row gx-0">
        <div class="nombre col-12 col-xl-4 f-rojo">Ciudad</div>

        <input type="text" formControlName="ciudad" class="valor align-middle col-12 col-xl-8 inpt" />
      </div>

      <div class="row gx-0">
        <div class="nombre col-12 col-xl-4 f-rojo">Provincia</div>

        <input type="text" formControlName="provincia" class="valor align-middle col-12 col-xl-8 inpt" />
      </div>


      <div class="row gx-0">
        <div class="nombre col-12 col-xl-4 f-rojo">CP</div>

        <input type="number" formControlName="cp" class="valor align-middle col-12 col-xl-8 inpt" />
      </div>



      <div class="col-12 col-md-6 d-flex flex-column flex-md-row">
        <div class="f-rojo">Número</div>
        <input type="text" class="numero" readonly [(ngModel)]="tfno.numero" />
      </div>

      <div class="col-12 col-md-5 d-flex flex-column flex-md-row">
        <div class="f-rojo">Extensión</div>
        <input type="text" class="extension" readonly [(ngModel)]="tfno.extension" />
      </div>

      <div class="iconos col-12 col-md-1 d-flex justify-content-end align-items-center">
        <i class="fa-solid fa-pen me-2 me-lg-3" data-bs-toggle="modal" data-bs-target="#insertOrUpdateTfn"
          (click)="setInfoTfn(i); accion=acciones[1]; limpiarMensaje()"></i>

        <i class="fa-solid fa-trash me-2" (click)="deleteTfno(i); accion=acciones[2]; limpiarMensaje()"></i>
      </div>

    </div>

  </div>

  <button type="button" class="btn-primario mt-2" data-bs-toggle="modal" data-bs-target="#insertOrUpdateTfn"
    (click)="accion=acciones[0]; limpiarMensaje()">
    Añadir teléfono
  </button>
</div>


<!--  Modal -->
<div class="modal" id="insertOrUpdateTfn" tabindex="-1" aria-hidden="true" aria-labelledby="insertOrUpdateTfnLabel"
  data-bs-backdrop="static" data-bs-keyboard="false">

  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h1 class="modal-title fs-5" id="insertOrUpdateTfnLabel">{{ accion | titlecase }} teléfono</h1>
        <button #closeModal type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"
          (click)="limpiarFormulario()"></button>
      </div>

      <form [formGroup]="modalForm" (ngSubmit)="insertOrUpdateTfno()" novalidate>
        <div class="modal-body">
          <div class="mb-4">
            <label for="numero">Número</label><br>

            <input type="text" name="numero" id="numero" class="numero form-control" required formControlName="numero"
              placeholder="Introduce el número de teléfono." />

            <div>
              <p *ngIf="formCtrls['numero']?.errors?.['required']" class="mensaje-error">
                El número es obligatorio.
              </p>

              <p *ngIf="formCtrls['numero']?.errors?.['pattern'] && formCtrls['numero']?.touched" class="mensaje-error">
                Formato no válido.
              </p>
            </div>
          </div>

          <div>
            <label for="extension">Extensión</label><br>

            <input type="text" name="extension" id="extension" class="extension form-control" required
              formControlName="extension" placeholder="Introduce la extensión." />

            <div>
              <p *ngIf="formCtrls['extension']?.errors?.['pattern'] && formCtrls['extension']?.touched"
                class="mensaje-error">
                La extensión debe ser un número.
              </p>
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn-terciario" data-bs-dismiss="modal" aria-label="Cancelar edición"
            (click)="limpiarFormulario()">
            Cancelar
          </button>

          <button type="submit" class="btn-terciario ms-4" aria-label="Guardar edición">
            Guardar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
