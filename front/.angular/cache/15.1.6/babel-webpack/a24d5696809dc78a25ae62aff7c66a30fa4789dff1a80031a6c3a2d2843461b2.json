{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../contenido.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@kolkov/angular-editor\";\nconst _c0 = [\"imagen\"];\nfunction EditadoComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\", 28);\n    i0.ɵɵtext(2, \"La noticia tiene asociada esta foto si quieres modificarla pulsa en seleccionar imagen\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"img\", 29);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", ctx_r1.infoNoticia.imagen, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction EditadoComponent_p_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 28);\n    i0.ɵɵtext(1, \"Esta noticia no tiene asociada ninguna foto, si quieres a\\u00F1adir alguna pulsa en seleccionar imagen\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EditadoComponent_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"div\", 31)(2, \"strong\");\n    i0.ɵɵtext(3, \"Error!!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" Los campos titulo y contenido son obligatorios. \");\n    i0.ɵɵelementStart(5, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function EditadoComponent_div_34_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.limpiarAlert());\n    });\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction EditadoComponent_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"div\", 33);\n    i0.ɵɵtext(2, \" La noticia se ha editado correctamente. \");\n    i0.ɵɵelementStart(3, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function EditadoComponent_div_35_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.limpiarAlert());\n    });\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction EditadoComponent_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"div\", 31);\n    i0.ɵɵtext(2, \" La noticia no se ha podido modificar. \");\n    i0.ɵɵelementStart(3, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function EditadoComponent_div_36_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.limpiarAlert());\n    });\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction EditadoComponent_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"div\", 31);\n    i0.ɵɵtext(2, \" Asegurate de que la imagen tiene extension y es una de las siguientes:PNG, JPG, png, jpg, jpeg, gif, tiff, svg, webp. \");\n    i0.ɵɵelementStart(3, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function EditadoComponent_div_37_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.limpiarAlert());\n    });\n    i0.ɵɵelementEnd()()();\n  }\n}\nexport class EditadoComponent {\n  constructor(ContenidoService) {\n    this.ContenidoService = ContenidoService;\n    this.editConfig = {\n      editable: true,\n      height: '100px',\n      minHeight: '0',\n      maxHeight: 'auto',\n      width: 'auto',\n      minWidth: '0',\n      translate: 'yes',\n      enableToolbar: true,\n      showToolbar: true,\n      placeholder: 'Enter text here...',\n      defaultParagraphSeparator: '',\n      defaultFontName: '',\n      defaultFontSize: '',\n      toolbarHiddenButtons: [['fontName', 'insertImage', 'insertVideo', 'insertHorizontalRule']]\n    };\n    this.res = \"no\";\n    this.alert = \"no\";\n    this.aviso = 0;\n    this.correcto = true;\n    this.idModificar = \"\";\n    this.infoNoticia = {\n      id: 0,\n      titulo: \"\",\n      subtitulo: \"\",\n      contenido: \"\",\n      seccion: \"\",\n      imagen: \"\"\n    };\n  }\n  mostrarImagen() {\n    let avisoImagen = 0;\n    if (Object.prototype.toString.call(this.infoNoticia.imagen) === '[object String]') {\n      if (this.infoNoticia.imagen === \"\") {\n        avisoImagen = 1;\n      } else {\n        avisoImagen = 2;\n      }\n    }\n    return avisoImagen;\n  }\n  limpiarAlert() {\n    this.alert = \"no\";\n    this.aviso = 0;\n  }\n  capturarFile(event) {\n    const files = event.target.files[0];\n    this.infoNoticia.imagen = files;\n    console.log(this.comprobarExtension(files));\n    if (!this.comprobarExtension(files)) {\n      this.aviso = 3;\n    }\n  }\n  comprobarExtension(file) {\n    let permitida = false;\n    this.correcto = false;\n    let extensiones_permitidas = ['.PNG', \".JPG\", '.png', '.jpg', '.jpeg', '.gif', '.tiff', '.svg', '.webp'];\n    let extension = file.name.substring(file.name.lastIndexOf(\".\")).toLowerCase();\n    if (extension != \"\") {\n      for (let i = 0; i < extensiones_permitidas.length && !permitida; i++) {\n        if (extensiones_permitidas[i] == extension) {\n          permitida = true;\n          this.correcto = true;\n        }\n      }\n    }\n    return permitida;\n  }\n  limpiarContenido() {\n    this.infoNoticia.titulo = \"\";\n    this.infoNoticia.subtitulo = \"\";\n    this.infoNoticia.contenido = \"\";\n    this.infoNoticia.imagen = \"\";\n    this.foto.nativeElement.value = '';\n  }\n  modificarNoticia() {\n    if (this.infoNoticia.titulo.trim().length === 0 || this.infoNoticia.contenido.trim().length === 0) {\n      this.alert = \"si\";\n    } else if (!this.correcto) {\n      this.aviso = 3;\n    } else {\n      this.ContenidoService.editarNoticia(this.idModificar, this.infoNoticia).subscribe({\n        next: data => {\n          if (data !== \"No se ha podido modificar\") {\n            this.ContenidoService.editar(this.idModificar, data);\n            this.limpiarContenido();\n            this.aviso = 1;\n          }\n        },\n        error: error => {\n          this.aviso = 2;\n        }\n      });\n    }\n  }\n}\nEditadoComponent.ɵfac = function EditadoComponent_Factory(t) {\n  return new (t || EditadoComponent)(i0.ɵɵdirectiveInject(i1.ContenidoService));\n};\nEditadoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EditadoComponent,\n  selectors: [[\"app-editado\"]],\n  viewQuery: function EditadoComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.foto = _t.first);\n    }\n  },\n  inputs: {\n    idModificar: \"idModificar\",\n    infoNoticia: \"infoNoticia\"\n  },\n  decls: 43,\n  vars: 12,\n  consts: [[\"id\", \"modalEditado\", \"tabindex\", \"-1\", 1, \"modal\"], [1, \"modal-dialog\", \"modal-xl\", \"modal-lg\"], [1, \"modal-content\"], [1, \"modal-header\", \"bordeColor\"], [1, \"modal-title\", \"modalTitulo\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\", 3, \"click\"], [1, \"modal-body\"], [3, \"ngSubmit\"], [1, \"row\"], [1, \"col-12\"], [1, \"form-group\"], [\"for\", \"titulo\"], [\"type\", \"text\", \"id\", \"titulo\", \"name\", \"titulo\", \"placeholder\", \"Escribe un titulo\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"id\", \"subtitulo\", \"placeholder\", \"Escribe un subtitulo\", \"name\", \"subtitulo\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"contenido\", 3, \"config\", \"placeholder\", \"ngModel\", \"ngModelChange\"], [1, \"col-12\", \"mt-3\"], [\"for\", \"imagen\"], [\"accept\", \"image/*\", \"type\", \"file\", \"name\", \"imagen\", 1, \"form-control\", \"mb-3\", 3, \"change\"], [\"imagen\", \"\"], [1, \"col-lg-3\", \"col-12\"], [1, \"col-lg-6\", \"col-12\"], [3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [\"class\", \"pb-3 pt-3\", 4, \"ngSwitchCase\"], [\"class\", \"container mt-3 mb-2\", 4, \"ngIf\"], [1, \"modal-footer\", \"bordeArriba\"], [\"type\", \"submit\", 1, \"btn\", \"botonAdd\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"botonCerrar\", \"ms-4\", 3, \"click\"], [1, \"pb-3\", \"pt-3\"], [1, \"pb-4\", \"img-fluid\", 3, \"src\"], [1, \"container\", \"mt-3\", \"mb-2\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\", \"alert-dismissible\", \"fade\", \"show\"], [\"type\", \"button\", \"data-bs-dismiss\", \"alert\", \"aria-label\", \"Close\", 1, \"btn-close\", 3, \"click\"], [\"role\", \"alert\", 1, \"alert\", \"alert-success\", \"alert-dismissible\", \"fade\", \"show\"]],\n  template: function EditadoComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h3\", 4);\n      i0.ɵɵtext(5, \"Modificando Contenido\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function EditadoComponent_Template_button_click_6_listener() {\n        return ctx.limpiarAlert();\n      })(\"click\", function EditadoComponent_Template_button_click_6_listener() {\n        return ctx.limpiarContenido();\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"div\", 6)(8, \"form\", 7);\n      i0.ɵɵlistener(\"ngSubmit\", function EditadoComponent_Template_form_ngSubmit_8_listener() {\n        return ctx.modificarNoticia();\n      });\n      i0.ɵɵelementStart(9, \"div\", 8)(10, \"div\", 9)(11, \"div\", 10)(12, \"label\", 11);\n      i0.ɵɵtext(13, \"T\\u00EDtulo del contenido:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"input\", 12);\n      i0.ɵɵlistener(\"ngModelChange\", function EditadoComponent_Template_input_ngModelChange_14_listener($event) {\n        return ctx.infoNoticia.titulo = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"label\", 11);\n      i0.ɵɵtext(16, \"Subt\\u00EDtulo del contenido:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"input\", 13);\n      i0.ɵɵlistener(\"ngModelChange\", function EditadoComponent_Template_input_ngModelChange_17_listener($event) {\n        return ctx.infoNoticia.subtitulo = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"label\", 11);\n      i0.ɵɵtext(19, \"Contenido:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"angular-editor\", 14);\n      i0.ɵɵlistener(\"ngModelChange\", function EditadoComponent_Template_angular_editor_ngModelChange_20_listener($event) {\n        return ctx.infoNoticia.contenido = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(21, \"div\", 15)(22, \"label\", 16);\n      i0.ɵɵtext(23, \"Seleccionar Imagen:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(24, \"input\", 17, 18);\n      i0.ɵɵlistener(\"change\", function EditadoComponent_Template_input_change_24_listener($event) {\n        return ctx.capturarFile($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(26, \"div\", 9)(27, \"div\", 8);\n      i0.ɵɵelement(28, \"div\", 19);\n      i0.ɵɵelementStart(29, \"div\", 20)(30, \"div\", 21);\n      i0.ɵɵtemplate(31, EditadoComponent_div_31_Template, 4, 1, \"div\", 22);\n      i0.ɵɵtemplate(32, EditadoComponent_p_32_Template, 2, 0, \"p\", 23);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(33, \"div\", 19);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵtemplate(34, EditadoComponent_div_34_Template, 6, 0, \"div\", 24);\n      i0.ɵɵtemplate(35, EditadoComponent_div_35_Template, 4, 0, \"div\", 24);\n      i0.ɵɵtemplate(36, EditadoComponent_div_36_Template, 4, 0, \"div\", 24);\n      i0.ɵɵtemplate(37, EditadoComponent_div_37_Template, 4, 0, \"div\", 24);\n      i0.ɵɵelementStart(38, \"div\", 25)(39, \"button\", 26);\n      i0.ɵɵtext(40, \"Editar\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"button\", 27);\n      i0.ɵɵlistener(\"click\", function EditadoComponent_Template_button_click_41_listener() {\n        return ctx.limpiarAlert();\n      })(\"click\", function EditadoComponent_Template_button_click_41_listener() {\n        return ctx.limpiarContenido();\n      });\n      i0.ɵɵtext(42, \"Cerrar\");\n      i0.ɵɵelementEnd()()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(14);\n      i0.ɵɵproperty(\"ngModel\", ctx.infoNoticia.titulo);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.infoNoticia.subtitulo);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"config\", ctx.editConfig)(\"placeholder\", \"Enter text here...\")(\"ngModel\", ctx.infoNoticia.contenido);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngSwitch\", ctx.mostrarImagen());\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngSwitchCase\", 2);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngSwitchCase\", 1);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.alert !== \"no\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.aviso === 1);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.aviso === 2);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.aviso === 3);\n    }\n  },\n  dependencies: [i2.NgIf, i2.NgSwitch, i2.NgSwitchCase, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.NgModel, i3.NgForm, i4.AngularEditorComponent],\n  styles: [\".modalTitulo[_ngcontent-%COMP%] {\\n  color: var(--color-secundario);\\n  font-family: var(--tipo-textos);\\n}\\n\\n.botonNoticia[_ngcontent-%COMP%] {\\n  color: var(--bs-white);\\n  background-color: var(--color-secundario);\\n}\\n.botonNoticia[_ngcontent-%COMP%]:hover {\\n  color: var(--bs-white);\\n  background-color: var(--bs-dark);\\n}\\n\\n.bordeColor[_ngcontent-%COMP%] {\\n  border-bottom: 1px solid var(--color-secundario);\\n}\\n\\n.bordeArriba[_ngcontent-%COMP%] {\\n  border-top: 1px solid var(--color-secundario);\\n}\\n\\n.botonAdd[_ngcontent-%COMP%], .botonCerrar[_ngcontent-%COMP%] {\\n  position: relative;\\n  padding: 9px 30px;\\n  margin: 5px 0;\\n  color: var(--color-secundario);\\n  text-decoration: none;\\n  text-align: center;\\n  text-transform: uppercase;\\n  transition: 0.5s;\\n}\\n\\n.botonAdd[_ngcontent-%COMP%]::before, .botonCerrar[_ngcontent-%COMP%]::before {\\n  content: \\\" \\\";\\n  position: absolute;\\n  top: -1px;\\n  left: -1px;\\n  width: 20px;\\n  height: 20px;\\n  border-top: 2px solid var(--color-secundario);\\n  border-left: 2px solid var(--color-secundario);\\n  transition: 0.5s;\\n  transition-delay: 0.5s;\\n}\\n\\n.botonAdd[_ngcontent-%COMP%]::after, .botonCerrar[_ngcontent-%COMP%]::after {\\n  content: \\\" \\\";\\n  position: absolute;\\n  bottom: -1px;\\n  right: -1px;\\n  width: 20px;\\n  height: 20px;\\n  border-bottom: 2px solid var(--color-secundario);\\n  border-right: 2px solid var(--color-secundario);\\n  transition: 0.5s;\\n  transition-delay: 0.5s;\\n}\\n\\n.botonAdd[_ngcontent-%COMP%]:hover::before, .botonAdd[_ngcontent-%COMP%]:hover::after, .botonCerrar[_ngcontent-%COMP%]:hover::before, .botonCerrar[_ngcontent-%COMP%]:hover::after {\\n  width: 100%;\\n  height: 100%;\\n  transition-delay: 0s;\\n}\\n\\n.botonAdd[_ngcontent-%COMP%]:hover, .botonCerrar[_ngcontent-%COMP%]:hover {\\n  background: var(--color-secundario);\\n  color: var(--bs-white);\\n  box-shadow: 0 0 20px var(--color-granate-oscuro);\\n  transition-delay: 0.5s;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZ2VzdGlvbi1jb250ZW5pZG8vZWRpdGFkby9lZGl0YWRvLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsOEJBQUE7RUFDQSwrQkFBQTtBQUNGOztBQUVBO0VBQ0Usc0JBQUE7RUFDQSx5Q0FBQTtBQUNGO0FBQ0U7RUFDRSxzQkFBQTtFQUNBLGdDQUFBO0FBQ0o7O0FBR0E7RUFDRSxnREFBQTtBQUFGOztBQUdBO0VBQ0UsNkNBQUE7QUFBRjs7QUFHQTs7RUFFRSxrQkFBQTtFQUNBLGlCQUFBO0VBQ0EsYUFBQTtFQUNBLDhCQUFBO0VBQ0EscUJBQUE7RUFDQSxrQkFBQTtFQUNBLHlCQUFBO0VBQ0EsZ0JBQUE7QUFBRjs7QUFHQTs7RUFFRSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxTQUFBO0VBQ0EsVUFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsNkNBQUE7RUFDQSw4Q0FBQTtFQUNBLGdCQUFBO0VBQ0Esc0JBQUE7QUFBRjs7QUFHQTs7RUFFRSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsZ0RBQUE7RUFDQSwrQ0FBQTtFQUNBLGdCQUFBO0VBQ0Esc0JBQUE7QUFBRjs7QUFHQTs7OztFQUlFLFdBQUE7RUFDQSxZQUFBO0VBQ0Esb0JBQUE7QUFBRjs7QUFHQTtFQUNFLG1DQUFBO0VBQ0Esc0JBQUE7RUFDQSxnREFBQTtFQUNBLHNCQUFBO0FBQUYiLCJzb3VyY2VzQ29udGVudCI6WyIubW9kYWxUaXR1bG8ge1xuICBjb2xvcjogdmFyKC0tY29sb3Itc2VjdW5kYXJpbyk7XG4gIGZvbnQtZmFtaWx5OiB2YXIoLS10aXBvLXRleHRvcyk7XG59XG5cbi5ib3Rvbk5vdGljaWEge1xuICBjb2xvcjogdmFyKC0tYnMtd2hpdGUpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1zZWN1bmRhcmlvKTtcblxuICAmOmhvdmVyIHtcbiAgICBjb2xvcjp2YXIoLS1icy13aGl0ZSk7XG4gICAgYmFja2dyb3VuZC1jb2xvcjp2YXIoLS1icy1kYXJrKTtcbiAgfVxufVxuXG4uYm9yZGVDb2xvciB7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1jb2xvci1zZWN1bmRhcmlvKTtcbn1cblxuLmJvcmRlQXJyaWJhIHtcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWNvbG9yLXNlY3VuZGFyaW8pO1xufVxuXG4uYm90b25BZGQsXG4uYm90b25DZXJyYXIge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHBhZGRpbmc6IDlweCAzMHB4O1xuICBtYXJnaW46IDVweCAwO1xuICBjb2xvcjogdmFyKC0tY29sb3Itc2VjdW5kYXJpbyk7XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICB0cmFuc2l0aW9uOiAwLjVzO1xufVxuXG4uYm90b25BZGQ6OmJlZm9yZSxcbi5ib3RvbkNlcnJhcjo6YmVmb3JlIHtcbiAgY29udGVudDogXCIgXCI7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAtMXB4O1xuICBsZWZ0OiAtMXB4O1xuICB3aWR0aDogMjBweDtcbiAgaGVpZ2h0OiAyMHB4O1xuICBib3JkZXItdG9wOiAycHggc29saWQgdmFyKC0tY29sb3Itc2VjdW5kYXJpbyk7XG4gIGJvcmRlci1sZWZ0OiAycHggc29saWQgdmFyKC0tY29sb3Itc2VjdW5kYXJpbyk7XG4gIHRyYW5zaXRpb246IDAuNXM7XG4gIHRyYW5zaXRpb24tZGVsYXk6IDAuNXM7XG59XG5cbi5ib3RvbkFkZDo6YWZ0ZXIsXG4uYm90b25DZXJyYXI6OmFmdGVyIHtcbiAgY29udGVudDogXCIgXCI7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgYm90dG9tOiAtMXB4O1xuICByaWdodDogLTFweDtcbiAgd2lkdGg6IDIwcHg7XG4gIGhlaWdodDogMjBweDtcbiAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHZhcigtLWNvbG9yLXNlY3VuZGFyaW8pO1xuICBib3JkZXItcmlnaHQ6IDJweCBzb2xpZCB2YXIoLS1jb2xvci1zZWN1bmRhcmlvKTtcbiAgdHJhbnNpdGlvbjogMC41cztcbiAgdHJhbnNpdGlvbi1kZWxheTogMC41cztcbn1cblxuLmJvdG9uQWRkOmhvdmVyOjpiZWZvcmUsXG4uYm90b25BZGQ6aG92ZXI6OmFmdGVyLFxuLmJvdG9uQ2VycmFyOmhvdmVyOjpiZWZvcmUsXG4uYm90b25DZXJyYXI6aG92ZXI6OmFmdGVyIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgdHJhbnNpdGlvbi1kZWxheTogMHM7XG59XG5cbi5ib3RvbkFkZDpob3ZlciwuYm90b25DZXJyYXI6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zZWN1bmRhcmlvKTtcbiAgY29sb3I6IHZhcigtLWJzLXdoaXRlKTtcbiAgYm94LXNoYWRvdzogMCAwIDIwcHggdmFyKC0tY29sb3ItZ3JhbmF0ZS1vc2N1cm8pO1xuICB0cmFuc2l0aW9uLWRlbGF5OiAwLjVzO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","EditadoComponent","constructor","ContenidoService","editable","height","minHeight","maxHeight","width","minWidth","translate","enableToolbar","showToolbar","placeholder","defaultParagraphSeparator","defaultFontName","defaultFontSize","toolbarHiddenButtons","res","alert","aviso","correcto","idModificar","infoNoticia","id","titulo","subtitulo","contenido","seccion","imagen","mostrarImagen","avisoImagen","Object","prototype","toString","call","limpiarAlert","capturarFile","event","files","target","console","log","comprobarExtension","file","permitida","extensiones_permitidas","extension","name","substring","lastIndexOf","toLowerCase","i","length","limpiarContenido","foto","nativeElement","value","modificarNoticia","trim","editarNoticia","subscribe","next","data","editar","error","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["/home/mario/donantesSangrePuertollano/front/src/app/gestion-contenido/editado/editado.component.html","/home/mario/donantesSangrePuertollano/front/src/app/gestion-contenido/editado/editado.component.ts"],"sourcesContent":["<div class=\"modal\" id=\"modalEditado\" tabindex=\"-1\">\n  <div class=\"modal-dialog modal-xl modal-lg\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header bordeColor\">\n        <h3 class=\"modal-title modalTitulo\">Modificando Contenido</h3>\n        <button (click)=\"limpiarAlert()\" (click)=\"limpiarContenido()\" type=\"button\" class=\"btn-close\"\n          data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n      </div>\n      <div class=\"modal-body\">\n        <form (ngSubmit)=\"modificarNoticia();\">\n          <div class=\"row\">\n            <div class=\"col-12\">\n              <div class=\"form-group\">\n                <label for=\"titulo\">Título del contenido:</label>\n\n                <input [(ngModel)]=\"infoNoticia.titulo\" type=\"text\" id=\"titulo\" name=\"titulo\" class=\"form-control mb-3\"\n                  placeholder=\"Escribe un titulo\" />\n\n                <label for=\"titulo\">Subtítulo del contenido:</label>\n\n                <input [(ngModel)]=\"infoNoticia.subtitulo\" type=\"text\" id=\"subtitulo\" placeholder=\"Escribe un subtitulo\"\n                  name=\"subtitulo\" class=\"form-control mb-3\" />\n\n                <label for=\"titulo\">Contenido:</label>\n                <angular-editor name=\"contenido\" [config]=\"editConfig\" [placeholder]=\"'Enter text here...'\"\n                  [(ngModel)]=\"infoNoticia.contenido\"></angular-editor>\n              </div>\n              <div class=\"col-12 mt-3\">\n\n                <label for=\"imagen\">Seleccionar Imagen:</label>\n\n                <input (change)=\"capturarFile($event)\" accept=\"image/*\" class=\"form-control mb-3\" type=\"file\" #imagen\n                  name=\"imagen\" />\n              </div>\n              <div class=\"col-12\">\n                <div class=\"row\">\n                  <div class=\"col-lg-3 col-12\"></div>\n                  <div class=\"col-lg-6 col-12\">\n                    <div [ngSwitch]=\"mostrarImagen()\">\n                      <div *ngSwitchCase=\"2\">\n                        <p class=\"pb-3 pt-3\">La noticia tiene asociada esta foto si quieres modificarla pulsa en\n                          seleccionar imagen</p>\n                        <img class=\"pb-4 img-fluid\" [src]=infoNoticia.imagen>\n                      </div>\n                      <p *ngSwitchCase=\"1\" class=\"pb-3 pt-3\">Esta noticia no tiene asociada ninguna foto, si quieres añadir alguna pulsa\n                        en seleccionar imagen</p>\n                    </div>\n                  </div>\n                  <div class=\"col-lg-3 col-12\"></div>\n                </div>\n              </div>\n\n            </div>\n          </div>\n          <div *ngIf=\"alert!=='no'\" class=\"container mt-3 mb-2\">\n            <div class=\"alert alert-danger alert-dismissible fade show\" role=\"alert\">\n              <strong>Error!!</strong> Los campos titulo y contenido son obligatorios.\n              <button (click)=\"limpiarAlert()\" type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"\n                aria-label=\"Close\"></button>\n            </div>\n          </div>\n          <div *ngIf=\"aviso===1\" class=\"container mt-3 mb-2\">\n            <div class=\"alert alert-success alert-dismissible fade show\" role=\"alert\">\n              La noticia se ha editado correctamente.\n              <button (click)=\"limpiarAlert()\" type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"\n                aria-label=\"Close\"></button>\n            </div>\n          </div>\n          <div *ngIf=\"aviso===2\" class=\"container mt-3 mb-2\">\n            <div class=\"alert alert-danger alert-dismissible fade show\" role=\"alert\">\n              La noticia no se ha podido modificar.\n              <button (click)=\"limpiarAlert()\" type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"\n                aria-label=\"Close\"></button>\n            </div>\n          </div>\n          <div *ngIf=\"aviso===3\" class=\"container mt-3 mb-2\">\n            <div class=\"alert alert-danger alert-dismissible fade show\" role=\"alert\">\n              Asegurate de que la imagen tiene extension y es una de las siguientes:PNG, JPG, png, jpg, jpeg, gif, tiff,\n              svg, webp.\n              <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\" aria-label=\"Close\"\n                (click)=\"limpiarAlert()\"></button>\n            </div>\n          </div>\n\n          <div class=\"modal-footer bordeArriba\">\n            <button type=\"submit\" class=\"btn botonAdd\">Editar</button>\n\n            <button type=\"button\" (click)=\"limpiarAlert()\" (click)=\"limpiarContenido()\" class=\"btn botonCerrar ms-4\"\n              data-bs-dismiss=\"modal\">Cerrar</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, ViewChild, ElementRef, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { Contenido, Noticia } from '../Interfaces/Contenido.interface';\nimport { ContenidoService } from '../contenido.service';\nimport { AngularEditorConfig } from '@kolkov/angular-editor';\n\n@Component({\n  selector: 'app-editado',\n  templateUrl: './editado.component.html',\n  styleUrls: ['./editado.component.scss']\n})\nexport class EditadoComponent {\n  editConfig: AngularEditorConfig = {\n    editable: true,\n    height: '100px',\n    minHeight: '0',\n    maxHeight: 'auto',\n    width: 'auto',\n    minWidth: '0',\n    translate: 'yes',\n    enableToolbar: true,\n    showToolbar: true,\n    placeholder: 'Enter text here...',\n    defaultParagraphSeparator: '',\n    defaultFontName: '',\n    defaultFontSize: '',\n    toolbarHiddenButtons: [['fontName', 'insertImage', 'insertVideo', 'insertHorizontalRule']]\n  };\n\n  res: string;\n  alert: string;\n  aviso: number;\n  correcto: boolean;\n\n  @Input() idModificar: string;\n  @Input() infoNoticia: Noticia;\n\n  @ViewChild('imagen') foto!: ElementRef<HTMLInputElement>;\n\n  constructor(private ContenidoService: ContenidoService) {\n    this.res = \"no\";\n    this.alert = \"no\";\n    this.aviso = 0;\n    this.correcto = true;\n    this.idModificar = \"\";\n    this.infoNoticia = {\n      id: 0,\n      titulo: \"\",\n      subtitulo: \"\",\n      contenido: \"\",\n      seccion: \"\",\n      imagen: \"\"\n    };\n  }\n  mostrarImagen() {\n    let avisoImagen = 0;\n    if (Object.prototype.toString.call(this.infoNoticia.imagen) === '[object String]') {\n      if (this.infoNoticia.imagen === \"\") {\n        avisoImagen = 1;\n      } else {\n        avisoImagen = 2;\n      }\n    }\n    return avisoImagen;\n  }\n  limpiarAlert() {\n    this.alert = \"no\";\n    this.aviso = 0;\n  }\n  capturarFile(event: any) {\n    const files = event.target.files[0];\n    this.infoNoticia.imagen = files;\n    console.log(this.comprobarExtension(files));\n    if (!this.comprobarExtension(files)) {\n      this.aviso = 3;\n    }\n  }\n  comprobarExtension(file: any): boolean {\n    let permitida = false;\n    this.correcto = false;\n    let extensiones_permitidas = ['.PNG', \".JPG\", '.png', '.jpg', '.jpeg', '.gif', '.tiff', '.svg', '.webp'];\n    let extension = (file.name.substring(file.name.lastIndexOf(\".\"))).toLowerCase();\n    if (extension != \"\") {\n      for (let i = 0; i < extensiones_permitidas.length && !permitida; i++) {\n        if (extensiones_permitidas[i] == extension) {\n          permitida = true;\n          this.correcto = true;\n        }\n      }\n    }\n    return permitida;\n  }\n\n\n  limpiarContenido() {\n    this.infoNoticia.titulo = \"\";\n    this.infoNoticia.subtitulo = \"\";\n    this.infoNoticia.contenido = \"\";\n    this.infoNoticia.imagen = \"\";\n    this.foto.nativeElement.value = ''\n  }\n  modificarNoticia() {\n    if (this.infoNoticia.titulo.trim().length === 0 || this.infoNoticia.contenido.trim().length === 0) {\n      this.alert = \"si\";\n    } else if (!this.correcto) {\n      this.aviso = 3;\n    } else {\n      this.ContenidoService.editarNoticia(this.idModificar, this.infoNoticia).subscribe({\n        next: data => {\n          if (data !== \"No se ha podido modificar\") {\n            this.ContenidoService.editar(this.idModificar, data);\n            this.limpiarContenido();\n            this.aviso = 1;\n          }\n        },\n        error: error => {\n          this.aviso = 2;\n        }\n      });\n    }\n  }\n}\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}