{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { Md5 } from 'ts-md5';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction RegistroComponent_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵtext(1, \"Este campo es obligatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegistroComponent_span_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵtext(1, \"Este campo es obligatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegistroComponent_span_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵtext(1, \"Este campo es obligatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegistroComponent_span_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26);\n    i0.ɵɵtext(1, \"Formato de email inv\\u00E1lido\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegistroComponent_span_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵtext(1, \"Este campo es obligatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegistroComponent_span_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵtext(1, \" Las dos contrase\\u00F1as deben coincidir. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegistroComponent_span_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 28);\n    i0.ɵɵtext(1, \"Este campo es obligatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegistroComponent_span_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 29);\n    i0.ɵɵtext(1, \"Este campo es obligatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class RegistroComponent {\n  constructor(authHttsService, router) {\n    this.authHttsService = authHttsService;\n    this.router = router;\n    this.contraErronea = false;\n    this.registradoExito = -1; // 0 => regsitro correcto | 1 => registro fallido\n    this.onFormValido = new EventEmitter();\n    this.registroForm = new FormGroup({\n      nombre: new FormControl('', [Validators.required]),\n      ap1: new FormControl('', [Validators.required]),\n      ap2: new FormControl('', [Validators.required]),\n      email: new FormControl('', [Validators.required, Validators.pattern(\"^[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$\")]),\n      passwd: new FormControl('', [Validators.required]),\n      passwdRep: new FormControl('', [Validators.required])\n    });\n  }\n  ngOnInit() {\n    this.contraErronea = false;\n    this.registradoExito = -1;\n  }\n  registro() {\n    const nombre = this.registroForm.get('nombre')?.value + ' ' + this.registroForm.get('ap1')?.value + ' ' + this.registroForm.get('ap2')?.value;\n    this.contraErronea = false;\n    if (this.registroForm.get('passwd')?.value == this.registroForm.get('passwdRep')?.value) {\n      const passwdHash = Md5.hashStr(this.registroForm.get('passwd')?.value);\n      this.authHttsService.registro({\n        email: this.registroForm.get('email')?.value,\n        nombre: nombre,\n        passwd: passwdHash\n      }).subscribe(resp => {\n        console.log(resp);\n        if (resp.success) {\n          this.onFormValido.emit(0);\n        } else {\n          this.onFormValido.emit(1);\n        }\n      });\n    } else {\n      this.contraErronea = true;\n    }\n  }\n  irAlLogin() {\n    this.router.navigate(['auth/login']);\n  }\n}\nRegistroComponent.ɵfac = function RegistroComponent_Factory(t) {\n  return new (t || RegistroComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n};\nRegistroComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RegistroComponent,\n  selectors: [[\"app-registro\"]],\n  outputs: {\n    onFormValido: \"onFormValido\"\n  },\n  decls: 42,\n  vars: 10,\n  consts: [[3, \"formGroup\", \"ngSubmit\"], [1, \"mb-2\"], [\"for\", \"nombre\", 1, \"form-label\"], [\"type\", \"text\", \"name\", \"nombre\", \"placeholder\", \"Introduce tu nombre\", \"formControlName\", \"nombre\", 1, \"form-control\"], [\"class\", \"form-text errorLogin mb-3\", 4, \"ngIf\"], [1, \"mt-4\", \"mb-2\"], [\"for\", \"ap1\", 1, \"form-label\"], [\"type\", \"text\", \"name\", \"ap1\", \"placeholder\", \"Introduce tu primer apellido\", \"formControlName\", \"ap1\", 1, \"form-control\"], [\"for\", \"ap2\", 1, \"form-label\"], [\"type\", \"text\", \"name\", \"ap2\", \"placeholder\", \"Introduce tu segundo apellido\", \"formControlName\", \"ap2\", 1, \"form-control\"], [1, \"mt-4\", \"mb-4\"], [\"for\", \"email\", 1, \"form-label\"], [\"type\", \"text\", \"name\", \"email\", \"placeholder\", \"Introduce tu email\", \"formControlName\", \"email\", 1, \"form-control\"], [\"class\", \"form-text errorLogin mb-2\", 4, \"ngIf\"], [\"class\", \"form-text errorLogin mt-4 mb-2\", 4, \"ngIf\"], [1, \"passwd\", \"mt-2\", \"mb-3\"], [\"for\", \"passwd\", 1, \"form-label\"], [\"type\", \"password\", \"name\", \"passwd\", \"placeholder\", \"Introduce tu contrase\\u00F1a\", \"formControlName\", \"passwd\", 1, \"form-control\"], [\"class\", \"form-text errorLogin\", 4, \"ngIf\"], [1, \"passwd\", \"mt-4\", \"mb-5\"], [\"for\", \"passwdRep\", 1, \"form-label\"], [\"type\", \"password\", \"name\", \"passwdRep\", \"placeholder\", \"Repite tu contrase\\u00F1a\", \"formControlName\", \"passwdRep\", 1, \"form-control\"], [\"class\", \"errorLogin\", 4, \"ngIf\"], [1, \"botonesLogin\", \"mb-3\", \"d-flex\", \"justify-content-center\"], [\"type\", \"submit\", 1, \"btn\", \"w-100\", \"btnAceptar\", 3, \"disabled\"], [1, \"form-text\", \"errorLogin\", \"mb-3\"], [1, \"form-text\", \"errorLogin\", \"mb-2\"], [1, \"form-text\", \"errorLogin\", \"mt-4\", \"mb-2\"], [1, \"form-text\", \"errorLogin\"], [1, \"errorLogin\"]],\n  template: function RegistroComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function RegistroComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.registro();\n      });\n      i0.ɵɵelementStart(1, \"div\", 1)(2, \"label\", 2);\n      i0.ɵɵtext(3, \"Nombre\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(4, \"br\")(5, \"input\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(6, RegistroComponent_span_6_Template, 2, 0, \"span\", 4);\n      i0.ɵɵelementStart(7, \"div\", 5)(8, \"label\", 6);\n      i0.ɵɵtext(9, \"Primer apellido\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(10, \"br\")(11, \"input\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(12, RegistroComponent_span_12_Template, 2, 0, \"span\", 4);\n      i0.ɵɵelementStart(13, \"div\", 5)(14, \"label\", 8);\n      i0.ɵɵtext(15, \"Segundo apellido\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(16, \"br\")(17, \"input\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(18, RegistroComponent_span_18_Template, 2, 0, \"span\", 4);\n      i0.ɵɵelementStart(19, \"div\", 10)(20, \"label\", 11);\n      i0.ɵɵtext(21, \"Email\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(22, \"br\")(23, \"input\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(24, RegistroComponent_span_24_Template, 2, 0, \"span\", 13);\n      i0.ɵɵtemplate(25, RegistroComponent_span_25_Template, 2, 0, \"span\", 4);\n      i0.ɵɵtemplate(26, RegistroComponent_span_26_Template, 2, 0, \"span\", 14);\n      i0.ɵɵelementStart(27, \"div\", 15)(28, \"label\", 16);\n      i0.ɵɵtext(29, \"Constrase\\u00F1a\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(30, \"br\")(31, \"input\", 17);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(32, RegistroComponent_span_32_Template, 2, 0, \"span\", 18);\n      i0.ɵɵelementStart(33, \"div\", 19)(34, \"label\", 20);\n      i0.ɵɵtext(35, \"Repite la constrase\\u00F1a\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(36, \"br\")(37, \"input\", 21);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(38, RegistroComponent_span_38_Template, 2, 0, \"span\", 22);\n      i0.ɵɵelementStart(39, \"div\", 23)(40, \"button\", 24);\n      i0.ɵɵtext(41, \"Aceptar\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      let tmp_1_0;\n      let tmp_2_0;\n      let tmp_3_0;\n      let tmp_4_0;\n      let tmp_5_0;\n      let tmp_7_0;\n      let tmp_8_0;\n      i0.ɵɵproperty(\"formGroup\", ctx.registroForm);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx.registroForm.get(\"nombre\")) == null ? null : tmp_1_0.invalid) && ((tmp_1_0 = ctx.registroForm.get(\"nombre\")) == null ? null : tmp_1_0.touched));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.registroForm.get(\"ap1\")) == null ? null : tmp_2_0.invalid) && ((tmp_2_0 = ctx.registroForm.get(\"ap1\")) == null ? null : tmp_2_0.touched));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx.registroForm.get(\"ap2\")) == null ? null : tmp_3_0.invalid) && ((tmp_3_0 = ctx.registroForm.get(\"ap2\")) == null ? null : tmp_3_0.touched));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = ctx.registroForm.get(\"email\")) == null ? null : tmp_4_0.errors == null ? null : tmp_4_0.errors[\"pattern\"]) && ((tmp_4_0 = ctx.registroForm.get(\"email\")) == null ? null : tmp_4_0.touched));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_5_0 = ctx.registroForm.get(\"email\")) == null ? null : tmp_5_0.errors == null ? null : tmp_5_0.errors[\"required\"]) && ((tmp_5_0 = ctx.registroForm.get(\"email\")) == null ? null : tmp_5_0.touched));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.contraErronea);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_7_0 = ctx.registroForm.get(\"passwd\")) == null ? null : tmp_7_0.invalid) && ((tmp_7_0 = ctx.registroForm.get(\"passwd\")) == null ? null : tmp_7_0.touched));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_8_0 = ctx.registroForm.get(\"passwdRep\")) == null ? null : tmp_8_0.invalid) && ((tmp_8_0 = ctx.registroForm.get(\"passwdRep\")) == null ? null : tmp_8_0.touched));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", ctx.registroForm.invalid);\n    }\n  },\n  dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName],\n  styles: [\"span.errorLogin[_ngcontent-%COMP%] {\\n  color: var(--color-primario);\\n}\\n\\ninput[_ngcontent-%COMP%] {\\n  padding: 0.4rem 1rem;\\n  border-radius: 2px;\\n}\\n\\ndiv[_ngcontent-%COMP%]   a.olvidoPasswd[_ngcontent-%COMP%] {\\n  color: var(--color-constraste-oscuro);\\n  text-decoration: none;\\n  font-size: --letra-pequena;\\n}\\ndiv[_ngcontent-%COMP%]   a.olvidoPasswd[_ngcontent-%COMP%]:hover {\\n  color: var(--color-secundario);\\n}\\n\\nbutton[_ngcontent-%COMP%] {\\n  border-radius: 2px;\\n}\\nbutton.btnAceptar[_ngcontent-%COMP%] {\\n  background-color: var(--color-secundario);\\n  color: var(--bs-white);\\n}\\nbutton.btnAceptar[_ngcontent-%COMP%]:hover {\\n  border: solid 1px var(--color-primario);\\n  background-color: var(--color-primario);\\n}\\nbutton.border-red[_ngcontent-%COMP%] {\\n  border: solid 1px var(--color-secundario);\\n  color: var(--color-secundario);\\n}\\nbutton.border-red[_ngcontent-%COMP%]:hover {\\n  background-color: var(--color-contraste);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYXV0aC9yZWdpc3Ryby9yZWdpc3Ryby5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLDRCQUFBO0FBQ0o7O0FBRUE7RUFDSSxvQkFBQTtFQUNBLGtCQUFBO0FBQ0o7O0FBUUk7RUFDSSxxQ0FBQTtFQUNBLHFCQUFBO0VBQ0EsMEJBQUE7QUFMUjtBQU9RO0VBQ0ksOEJBQUE7QUFMWjs7QUFVQTtFQXFCSSxrQkFBQTtBQTNCSjtBQU9JO0VBQ0kseUNBQUE7RUFDQSxzQkFBQTtBQUxSO0FBT1E7RUFDSSx1Q0FBQTtFQUNBLHVDQUFBO0FBTFo7QUFTSTtFQUNJLHlDQUFBO0VBQ0EsOEJBQUE7QUFQUjtBQVNRO0VBQ0ksd0NBQUE7QUFQWiIsInNvdXJjZXNDb250ZW50IjpbInNwYW4uZXJyb3JMb2dpbiB7XG4gICAgY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcmlvKTtcbn1cblxuaW5wdXQge1xuICAgIHBhZGRpbmc6IC40cmVtIDFyZW07XG4gICAgYm9yZGVyLXJhZGl1czogMnB4O1xuXG4gICAgLy8gJjpob3ZlciB7XG4gICAgLy8gICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1zZWN1bmRhcmlvKTtcbiAgICAvLyAgIGNvbG9yOiB2YXIoLS1icy13aGl0ZSk7XG4gICAgLy8gfVxufVxuXG5kaXYge1xuICAgIGEub2x2aWRvUGFzc3dkIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLWNvbnN0cmFzdGUtb3NjdXJvKTtcbiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgICAgICBmb250LXNpemU6ICgtLWxldHJhLXBlcXVlbmEpO1xuXG4gICAgICAgICY6aG92ZXIge1xuICAgICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXNlY3VuZGFyaW8pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5idXR0b24ge1xuICAgICYuYnRuQWNlcHRhciB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXNlY3VuZGFyaW8pO1xuICAgICAgICBjb2xvcjogdmFyKC0tYnMtd2hpdGUpO1xuXG4gICAgICAgICY6aG92ZXIge1xuICAgICAgICAgICAgYm9yZGVyOiBzb2xpZCAxcHggdmFyKC0tY29sb3ItcHJpbWFyaW8pOyBcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcmlvKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAmLmJvcmRlci1yZWQgeyAgICBcbiAgICAgICAgYm9yZGVyOiBzb2xpZCAxcHggdmFyKC0tY29sb3Itc2VjdW5kYXJpbyk7ICBcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXNlY3VuZGFyaW8pO1xuXG4gICAgICAgICY6aG92ZXIge1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItY29udHJhc3RlKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYm9yZGVyLXJhZGl1czogMnB4O1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["EventEmitter","Md5","FormControl","FormGroup","Validators","i0","RegistroComponent","constructor","authHttsService","router","nombre","required","ap1","ap2","email","pattern","passwd","passwdRep","ngOnInit","contraErronea","registradoExito","registro","registroForm","get","value","passwdHash","hashStr","subscribe","resp","console","log","success","onFormValido","emit","irAlLogin","navigate","selectors","outputs","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/home/mario/donantesSangrePuertollano/front/src/app/auth/registro/registro.component.ts","/home/mario/donantesSangrePuertollano/front/src/app/auth/registro/registro.component.html"],"sourcesContent":["import { Component, EventEmitter, OnInit, Output } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Md5 } from 'ts-md5';\nimport { NombreCompleto, UserRegsitro } from '../interfaces/auth.interface';\nimport { AuthService } from '../services/auth.service';\nimport { FormControl, FormGroup, Validators, FormsModule } from '@angular/forms';\n\n@Component({\n  selector: 'app-registro',\n  templateUrl: './registro.component.html',\n  styleUrls: ['./registro.component.scss']\n})\nexport class RegistroComponent {\n\n    contraErronea: boolean = false;\n    registradoExito: number = -1;  // 0 => regsitro correcto | 1 => registro fallido\n\n  @Output() onFormValido: EventEmitter<number> = new EventEmitter();\n\n  registroForm: FormGroup = new FormGroup({\n    nombre: new FormControl('', [Validators.required]),\n    ap1: new FormControl('', [Validators.required]),\n    ap2: new FormControl('', [Validators.required]),\n    email: new FormControl('', [Validators.required, Validators.pattern(\"^[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$\")]),\n    passwd: new FormControl('', [Validators.required]),\n    passwdRep: new FormControl('', [Validators.required])\n  });\n\n\n  constructor(\n    private authHttsService: AuthService,\n    private router: Router,\n  ) {}\n\n  ngOnInit() {\n\n    this.contraErronea = false;\n    this.registradoExito = -1;\n  }\n\n  registro() {\n\n    const nombre = this.registroForm.get('nombre')?.value + ' '\n      + this.registroForm.get('ap1')?.value + ' '\n      + this.registroForm.get('ap2')?.value;\n\n    this.contraErronea = false;\n\n    if (this.registroForm.get('passwd')?.value == this.registroForm.get('passwdRep')?.value) {\n\n      const passwdHash = Md5.hashStr(this.registroForm.get('passwd')?.value);\n\n      this.authHttsService.registro({\n        email: this.registroForm.get('email')?.value,\n        nombre: nombre,\n        passwd: passwdHash\n      }).subscribe(resp => {\n\n        console.log(resp);\n        if (resp.success) {\n          this.onFormValido.emit(0);\n        }\n        else {\n\n          this.onFormValido.emit(1);\n        }\n      });\n    }\n    else {\n      this.contraErronea = true;\n    }\n  }\n\n  irAlLogin() {\n    this.router.navigate(['auth/login']);\n  }\n}\n","\n\n<form [formGroup]=\"registroForm\" (ngSubmit)=\"registro()\">\n    \n    <div class=\"mb-2\">\n        <label class=\"form-label\" for=\"nombre\">Nombre</label><br>\n        <input \n            type=\"text\" \n            class=\"form-control\"\n            name=\"nombre\"\n            placeholder=\"Introduce tu nombre\"\n            formControlName=\"nombre\"\n        >\n    </div>\n    <span\n        class=\"form-text errorLogin mb-3\"\n        *ngIf=\"this.registroForm.get('nombre')?.invalid && this.registroForm.get('nombre')?.touched\"\n    >Este campo es obligatorio</span>\n\n    <div class=\"mt-4 mb-2\">\n        <label class=\"form-label\" for=\"ap1\">Primer apellido</label><br>\n        <input \n            type=\"text\" \n            class=\"form-control\"\n            name=\"ap1\"\n            placeholder=\"Introduce tu primer apellido\"\n            formControlName=\"ap1\"\n        >\n    </div>\n    <span\n        class=\"form-text errorLogin mb-3\"\n        *ngIf=\"this.registroForm.get('ap1')?.invalid && this.registroForm.get('ap1')?.touched\"\n    >Este campo es obligatorio</span>\n\n    <div class=\"mt-4 mb-2\">\n        <label class=\"form-label\" for=\"ap2\">Segundo apellido</label><br>\n        <input \n            type=\"text\" \n            class=\"form-control\"\n            name=\"ap2\"\n            placeholder=\"Introduce tu segundo apellido\"\n            formControlName=\"ap2\"\n        >\n    </div>\n    <span\n        class=\"form-text errorLogin mb-3\"\n        *ngIf=\"this.registroForm.get('ap2')?.invalid && this.registroForm.get('ap2')?.touched\"\n    >Este campo es obligatorio</span>\n\n    \n    <div class=\"mt-4 mb-4\">\n        <label class=\"form-label\" for=\"email\">Email</label><br>\n        <input \n            type=\"text\" \n            class=\"form-control\"\n            name=\"email\"\n            placeholder=\"Introduce tu email\"\n            formControlName=\"email\"\n        >\n    </div>\n    <span\n        class=\"form-text errorLogin mb-2\"\n        *ngIf=\"this.registroForm.get('email')?.errors?.['pattern'] && this.registroForm.get('email')?.touched\"\n    >Formato de email inválido</span>\n    <span\n        class=\"form-text errorLogin mb-3\"\n        *ngIf=\"this.registroForm.get('email')?.errors?.['required'] && this.registroForm.get('email')?.touched\"\n    >Este campo es obligatorio</span>\n    \n    <span *ngIf=\"this.contraErronea\" class=\"form-text errorLogin mt-4 mb-2\">\n        Las dos contraseñas deben coincidir.   \n    </span>\n    <div class=\"passwd mt-2 mb-3\">\n        <label class=\"form-label\" for=\"passwd\">Constraseña</label><br>\n        <input \n            type=\"password\"\n            class=\"form-control\"\n            name=\"passwd\"\n            placeholder=\"Introduce tu contraseña\"\n            formControlName=\"passwd\"\n        >\n    </div>\n    <span\n        class=\"form-text errorLogin\"\n        *ngIf=\"this.registroForm.get('passwd')?.invalid && this.registroForm.get('passwd')?.touched\"\n    >Este campo es obligatorio</span>\n    <div class=\"passwd mt-4 mb-5\">\n        <label class=\"form-label\" for=\"passwdRep\">Repite la constraseña</label><br>\n        <input \n            type=\"password\"\n            class=\"form-control\"\n            name=\"passwdRep\"\n            placeholder=\"Repite tu contraseña\"\n            formControlName=\"passwdRep\"\n        >\n    </div>\n    <span\n        class=\"errorLogin\"\n        *ngIf=\"this.registroForm.get('passwdRep')?.invalid && this.registroForm.get('passwdRep')?.touched\"\n    >Este campo es obligatorio</span>\n    \n    <div class=\"botonesLogin mb-3 d-flex justify-content-center\">\n        <button [disabled]=\"registroForm.invalid\" type=\"submit\" class=\"btn w-100 btnAceptar\">Aceptar</button>\n    </div> \n    \n</form>\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}