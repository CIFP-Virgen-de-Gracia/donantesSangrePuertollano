{"ast":null,"code":"import { Md5 } from 'ts-md5';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/auth.service\";\nimport * as i2 from \"src/app/shared/services/shared.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction LoginComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \" Usuario o constrase\\u00F1a incorrectos \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class LoginComponent {\n  constructor(authHttsService, SharedService, router) {\n    this.authHttsService = authHttsService;\n    this.SharedService = SharedService;\n    this.router = router;\n    this.erroneo = false;\n    this.nuevoUsr = {\n      email: '',\n      passwd: ''\n    };\n  }\n  irARegistro() {\n    this.router.navigate(['/auth/registro']);\n  }\n  login() {\n    const passwd = Md5.hashStr(this.nuevoUsr.passwd);\n    this.authHttsService.login({\n      email: this.nuevoUsr.email,\n      passwd: passwd\n    }).subscribe(resp => {\n      if (resp.success) {\n        localStorage.setItem('user', JSON.stringify(resp.data));\n        this.erroneo = false;\n        this.SharedService.comprobarPermisos.next(!this.erroneo);\n        this.router.navigate(['']);\n      } else this.erroneo = true;\n    });\n  }\n  irARecPasswd() {\n    this.router.navigate(['/auth/recuperacionpasswd']);\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.SharedService), i0.ɵɵdirectiveInject(i3.Router));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 24,\n  vars: 3,\n  consts: [[3, \"ngSubmit\"], [\"class\", \"form-text errorLogin\", 4, \"ngIf\"], [1, \"email\", \"mb-3\"], [\"for\", \"email\", 1, \"form-label\"], [\"type\", \"text\", \"name\", \"email\", \"placeholder\", \"Introduce tu email\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"passwd\", \"mt-4\"], [\"for\", \"passwd\", 1, \"form-label\"], [\"type\", \"password\", \"name\", \"passwd\", \"placeholder\", \"Introduce tu contrase\\u00F1a\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"mt-2\", \"mb-5\", \"d-flex\", \"justify-content-end\"], [1, \"me-2\", \"olvidoPasswd\", 3, \"click\"], [1, \"botonesLogin\", \"mb-3\", \"d-flex\", \"justify-content-center\"], [\"type\", \"submit\", 1, \"btn\", \"w-100\", \"btnAceptar\"], [1, \"card-body\", \"w-100\", \"p-0\"], [1, \"text-center\", \"mt-5\", \"mb-3\"], [1, \"botonRegistro\", \"mb-2\"], [\"type\", \"button\", 1, \"btn\", \"w-100\", \"border-red\", 3, \"click\"], [1, \"form-text\", \"errorLogin\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.login();\n      });\n      i0.ɵɵtemplate(1, LoginComponent_div_1_Template, 2, 0, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2)(3, \"label\", 3);\n      i0.ɵɵtext(4, \"Email\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(5, \"br\");\n      i0.ɵɵelementStart(6, \"input\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_6_listener($event) {\n        return ctx.nuevoUsr.email = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"div\", 5)(8, \"label\", 6);\n      i0.ɵɵtext(9, \"Constrase\\u00F1a\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(10, \"br\");\n      i0.ɵɵelementStart(11, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_11_listener($event) {\n        return ctx.nuevoUsr.passwd = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"div\", 8)(13, \"a\", 9);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_a_click_13_listener() {\n        return ctx.irARecPasswd();\n      });\n      i0.ɵɵtext(14, \"\\u00BFOlvidaste tu contrase\\u00F1a?\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(15, \"div\", 10)(16, \"button\", 11);\n      i0.ɵɵtext(17, \"Aceptar\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(18, \"div\", 12)(19, \"div\", 13);\n      i0.ɵɵtext(20, \"\\u00BFA\\u00FAn no te has registrado?\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"div\", 14)(22, \"button\", 15);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_22_listener() {\n        return ctx.irARegistro();\n      });\n      i0.ɵɵtext(23, \"Registrarse\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.erroneo);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.nuevoUsr.email);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.nuevoUsr.passwd);\n    }\n  },\n  dependencies: [i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.NgModel, i5.NgForm],\n  styles: [\"div.errorLogin[_ngcontent-%COMP%] {\\n  color: var(--color-primario);\\n}\\n\\ninput[_ngcontent-%COMP%] {\\n  padding: 0.4rem 1rem;\\n  border-radius: 2px;\\n}\\n\\ndiv[_ngcontent-%COMP%]   a.olvidoPasswd[_ngcontent-%COMP%] {\\n  color: var(--color-constraste-oscuro);\\n  text-decoration: none;\\n  font-size: --letra-pequena;\\n}\\ndiv[_ngcontent-%COMP%]   a.olvidoPasswd[_ngcontent-%COMP%]:hover {\\n  color: var(--color-secundario);\\n}\\n\\nbutton[_ngcontent-%COMP%] {\\n  border-radius: 2px;\\n}\\nbutton.btnAceptar[_ngcontent-%COMP%] {\\n  background-color: var(--color-secundario);\\n  color: var(--bs-white);\\n}\\nbutton.btnAceptar[_ngcontent-%COMP%]:hover {\\n  border: solid 1px var(--color-primario);\\n  background-color: var(--color-primario);\\n}\\nbutton.border-red[_ngcontent-%COMP%] {\\n  border: solid 1px var(--color-secundario);\\n  color: var(--color-secundario);\\n}\\nbutton.border-red[_ngcontent-%COMP%]:hover {\\n  background-color: var(--color-contraste);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYXV0aC9sb2dpbi9sb2dpbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLDRCQUFBO0FBQ0o7O0FBRUE7RUFDSSxvQkFBQTtFQUNBLGtCQUFBO0FBQ0o7O0FBUUk7RUFDSSxxQ0FBQTtFQUNBLHFCQUFBO0VBQ0EsMEJBQUE7QUFMUjtBQU9RO0VBQ0ksOEJBQUE7QUFMWjs7QUFVQTtFQXFCSSxrQkFBQTtBQTNCSjtBQU9JO0VBQ0kseUNBQUE7RUFDQSxzQkFBQTtBQUxSO0FBT1E7RUFDSSx1Q0FBQTtFQUNBLHVDQUFBO0FBTFo7QUFTSTtFQUNJLHlDQUFBO0VBQ0EsOEJBQUE7QUFQUjtBQVNRO0VBQ0ksd0NBQUE7QUFQWiIsInNvdXJjZXNDb250ZW50IjpbImRpdi5lcnJvckxvZ2luIHtcbiAgICBjb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyaW8pO1xufVxuXG5pbnB1dCB7XG4gICAgcGFkZGluZzogLjRyZW0gMXJlbTtcbiAgICBib3JkZXItcmFkaXVzOiAycHg7XG5cbiAgICAvLyAmOmhvdmVyIHtcbiAgICAvLyAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXNlY3VuZGFyaW8pO1xuICAgIC8vICAgY29sb3I6IHZhcigtLWJzLXdoaXRlKTtcbiAgICAvLyB9XG59XG5cbmRpdiB7XG4gICAgYS5vbHZpZG9QYXNzd2Qge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItY29uc3RyYXN0ZS1vc2N1cm8pO1xuICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgICAgIGZvbnQtc2l6ZTogKC0tbGV0cmEtcGVxdWVuYSk7XG5cbiAgICAgICAgJjpob3ZlciB7XG4gICAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itc2VjdW5kYXJpbyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmJ1dHRvbiB7XG4gICAgJi5idG5BY2VwdGFyIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itc2VjdW5kYXJpbyk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1icy13aGl0ZSk7XG5cbiAgICAgICAgJjpob3ZlciB7XG4gICAgICAgICAgICBib3JkZXI6IHNvbGlkIDFweCB2YXIoLS1jb2xvci1wcmltYXJpbyk7IFxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyaW8pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgICYuYm9yZGVyLXJlZCB7ICAgIFxuICAgICAgICBib3JkZXI6IHNvbGlkIDFweCB2YXIoLS1jb2xvci1zZWN1bmRhcmlvKTsgIFxuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itc2VjdW5kYXJpbyk7XG5cbiAgICAgICAgJjpob3ZlciB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1jb250cmFzdGUpO1xuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBib3JkZXItcmFkaXVzOiAycHg7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"AAGA,SAASA,GAAG,QAAQ,QAAQ;;;;;;;;;ICFxBC,+BAAuD;IACnDA,wDACJ;IAAAA,iBAAM;;;ADUV,OAAM,MAAOC,cAAc;EAQzBC,YACUC,eAA4B,EAC5BC,aAA4B,EAC5BC,MAAc;IAFd,oBAAe,GAAfF,eAAe;IACf,kBAAa,GAAbC,aAAa;IACb,WAAM,GAANC,MAAM;IAVhB,YAAO,GAAY,KAAK;IAExB,aAAQ,GAAc;MACpBC,KAAK,EAAE,EAAE;MACTC,MAAM,EAAE;KACT;EAMG;EAEJC,WAAW;IACT,IAAI,CAACH,MAAM,CAACI,QAAQ,CAAC,CAAC,gBAAgB,CAAC,CAAC;EAC1C;EAEAC,KAAK;IAEH,MAAMH,MAAM,GAAGR,GAAG,CAACY,OAAO,CAAC,IAAI,CAACC,QAAQ,CAACL,MAAM,CAAC;IAChD,IAAI,CAACJ,eAAe,CAACO,KAAK,CAAC;MAAEJ,KAAK,EAAE,IAAI,CAACM,QAAQ,CAACN,KAAK;MAAEC,MAAM,EAAEA;IAAM,CAAE,CAAC,CAACM,SAAS,CAACC,IAAI,IAAG;MAE1F,IAAIA,IAAI,CAACC,OAAO,EAAE;QAChBC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACL,IAAI,CAACM,IAAI,CAAC,CAAC;QACvD,IAAI,CAACC,OAAO,GAAG,KAAK;QACpB,IAAI,CAACjB,aAAa,CAACkB,iBAAiB,CAACC,IAAI,CAAC,CAAC,IAAI,CAACF,OAAO,CAAC;QACxD,IAAI,CAAChB,MAAM,CAACI,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;OAC3B,MACI,IAAI,CAACY,OAAO,GAAG,IAAI;IAC1B,CAAC,CAAC;EACJ;EAEAG,YAAY;IACV,IAAI,CAACnB,MAAM,CAACI,QAAQ,CAAC,CAAC,0BAA0B,CAAC,CAAC;EACpD;;AAnCWR,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;QAAdA,cAAc;EAAAwB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCb3B7B,+BAA2B;MAArBA;QAAA,OAAY8B,WAAO;MAAA,EAAC;MACtB9B,+DAEM;MAENA,8BAAwB;MACkBA,qBAAK;MAAAA,iBAAQ;MAAAA,qBAAI;MACvDA,gCAMC;MADGA;QAAA;MAAA,EAA4B;MALhCA,iBAMC;MAGLA,8BAAyB;MACkBA,gCAAW;MAAAA,iBAAQ;MAAAA,sBAAI;MAC9DA,iCAMC;MADGA;QAAA;MAAA,EAA6B;MALjCA,iBAMC;MACDA,+BAAkD;MAG1CA;QAAA,OAAS8B,kBAAc;MAAA,EAAC;MAAC9B,oDAAyB;MAAAA,iBAAI;MAKlEA,gCAA6D;MACNA,wBAAO;MAAAA,iBAAS;MAK3EA,gCAAiC;MACMA,qDAA0B;MAAAA,iBAAM;MAEnEA,gCAAgC;MAI5BA;QAAA,OAAS8B,iBAAa;MAAA,EAAC;MACtB9B,4BAAW;MAAAA,iBAAS;;;MA9CnBA,eAAkB;MAAlBA,kCAAkB;MAWhBA,eAA4B;MAA5BA,4CAA4B;MAW5BA,eAA6B;MAA7BA,6CAA6B","names":["Md5","i0","LoginComponent","constructor","authHttsService","SharedService","router","email","passwd","irARegistro","navigate","login","hashStr","nuevoUsr","subscribe","resp","success","localStorage","setItem","JSON","stringify","data","erroneo","comprobarPermisos","next","irARecPasswd","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/home/mario/donantesSangrePuertollano/front/src/app/auth/login/login.component.ts","/home/mario/donantesSangrePuertollano/front/src/app/auth/login/login.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { UserLogin } from '../interfaces/auth.interface';\nimport { AuthService } from '../services/auth.service';\nimport { Md5 } from 'ts-md5';\nimport { Router } from '@angular/router';\nimport { SharedService } from 'src/app/shared/services/shared.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss']\n})\n\nexport class LoginComponent {\n  erroneo: boolean = false;\n\n  nuevoUsr: UserLogin = {\n    email: '',\n    passwd: ''\n  };\n\n  constructor(\n    private authHttsService: AuthService,\n    private SharedService: SharedService,\n    private router: Router\n  ) { }\n\n  irARegistro() {\n    this.router.navigate(['/auth/registro']);\n  }\n\n  login() {\n\n    const passwd = Md5.hashStr(this.nuevoUsr.passwd);\n    this.authHttsService.login({ email: this.nuevoUsr.email, passwd: passwd }).subscribe(resp => {\n\n      if (resp.success) {\n        localStorage.setItem('user', JSON.stringify(resp.data));\n        this.erroneo = false;\n        this.SharedService.comprobarPermisos.next(!this.erroneo);\n        this.router.navigate(['']);\n      }\n      else this.erroneo = true;\n    });\n  }\n\n  irARecPasswd() {\n    this.router.navigate(['/auth/recuperacionpasswd']);\n  }\n}\n","<form (ngSubmit)=\"login()\">\n    <div *ngIf=\"this.erroneo\" class=\"form-text errorLogin\">\n        Usuario o constraseña incorrectos   \n    </div>\n\n    <div class=\"email mb-3\">\n        <label class=\"form-label\" for=\"email\">Email</label><br>\n        <input \n            type=\"text\" \n            class=\"form-control\"\n            name=\"email\"\n            placeholder=\"Introduce tu email\"\n            [(ngModel)]=\"nuevoUsr.email\"\n        >\n    </div>\n\n    <div class=\"passwd mt-4\">\n        <label class=\"form-label\" for=\"passwd\">Constraseña</label><br>\n        <input \n            type=\"password\"\n            class=\"form-control\"\n            name=\"passwd\"\n            placeholder=\"Introduce tu contraseña\"\n            [(ngModel)]=\"nuevoUsr.passwd\"\n        >\n        <div class=\"mt-2 mb-5 d-flex justify-content-end\">\n            <a\n                class=\"me-2 olvidoPasswd\" \n                (click)=\"irARecPasswd()\">¿Olvidaste tu contraseña?</a>\n        </div>\n    </div>\n\n    \n    <div class=\"botonesLogin mb-3 d-flex justify-content-center\">\n        <button type=\"submit\" class=\"btn w-100 btnAceptar\">Aceptar</button>\n    </div> \n    \n</form>\n\n<div class=\"card-body w-100 p-0\">\n    <div class=\"text-center mt-5 mb-3\">¿Aún no te has registrado?</div>\n\n    <div class=\"botonRegistro mb-2\">\n        <button \n        type=\"button\" \n        class=\"btn w-100 border-red\"\n        (click)=\"irARegistro()\"\n        >Registrarse</button>\n    </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}