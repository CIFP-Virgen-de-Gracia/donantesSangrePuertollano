{"ast":null,"code":"import { tap } from 'rxjs';\nimport { environment } from 'src/environment/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class CitasService {\n  constructor(httpPedirCita) {\n    this.httpPedirCita = httpPedirCita;\n    this.pedirCitaUrl = `${environment.baseUrl}/api/citas`;\n  }\n  fetchHorasDisponibles(fecha) {\n    return this.httpPedirCita.get(this.pedirCitaUrl + '/gethorasdisponibles/' + fecha).pipe(tap(citas => this._citasReservadas = citas));\n  }\n  // fetchHorarioCitas() {\n  //   return this.httpPedirCita.get<interfaces.HorarioCitasResponse>(this.pedirCitaUrl\n  //     + '/gethorariocitas').pipe(tap(horas => this._horasCitas = horas));\n  // }\n  insertCita(id, fecha, donacion) {\n    console.log('donacion');\n    console.log(donacion);\n    return this.httpPedirCita.post(this.pedirCitaUrl + '/pedircita', {\n      id: id,\n      fecha: fecha,\n      donacion: donacion\n    });\n  }\n  mandarCorreo(id, fecha, donacion) {\n    return this.httpPedirCita.post(this.pedirCitaUrl + '/mandarcorreocita', {\n      id: id,\n      fecha: fecha,\n      donacion: donacion\n    });\n  }\n  fetchCitaPendiente(id) {\n    return this.httpPedirCita.get(this.pedirCitaUrl + '/getcitapendienteuser/' + id).pipe(tap(resp => {\n      this._citasPendientesUser = resp.citas;\n    }));\n  }\n  fetchCitasPasadas(id) {\n    return this.httpPedirCita.get(this.pedirCitaUrl + '/getcitaspasadasuser/' + id).pipe(tap(resp => {\n      this._citasPasadasUser = resp.citas;\n    }));\n  }\n  cancelarCita(id) {\n    return this.httpPedirCita.put(this.pedirCitaUrl + '/cancelarcita/', {\n      id: id\n    });\n  }\n}\nCitasService.ɵfac = function CitasService_Factory(t) {\n  return new (t || CitasService)(i0.ɵɵinject(i1.HttpClient));\n};\nCitasService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: CitasService,\n  factory: CitasService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAEA,SAASA,GAAG,QAAQ,MAAM;AAC1B,SAASC,WAAW,QAAQ,6BAA6B;;;AAOzD,OAAM,MAAOC,YAAY;EAOvBC,YAAoBC,aAAyB;IAAzB,kBAAa,GAAbA,aAAa;IANzB,iBAAY,GAAG,GAAGH,WAAW,CAACI,OAAO,YAAY;EAMR;EAEjDC,qBAAqB,CAACC,KAAa;IACjC,OAAO,IAAI,CAACH,aAAa,CAACI,GAAG,CAAkC,IAAI,CAACC,YAAY,GAC5E,uBAAuB,GAAGF,KAAK,CAAC,CAACG,IAAI,CAACV,GAAG,CAACW,KAAK,IAAI,IAAI,CAACC,gBAAgB,GAAGD,KAAK,CAAC,CAAC;EACxF;EAEA;EACA;EACA;EACA;EAEAE,UAAU,CAACC,EAAU,EAAEP,KAAa,EAAEQ,QAAgB;IACpDC,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;IACvBD,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;IACrB,OAAO,IAAI,CAACX,aAAa,CAACc,IAAI,CAAgC,IAAI,CAACT,YAAY,GAC3E,YAAY,EAAE;MAACK,EAAE,EAAEA,EAAE;MAAEP,KAAK,EAAEA,KAAK;MAAEQ,QAAQ,EAAEA;IAAQ,CAAC,CAAC;EAC/D;EAGAI,YAAY,CAACL,EAAS,EAAEP,KAAa,EAAEQ,QAAgB;IACrD,OAAO,IAAI,CAACX,aAAa,CAACc,IAAI,CAAgC,IAAI,CAACT,YAAY,GAC3E,mBAAmB,EAAE;MAACK,EAAE,EAAEA,EAAE;MAAEP,KAAK,EAAEA,KAAK;MAAEQ,QAAQ,EAAEA;IAAQ,CAAC,CAAC;EACtE;EAGAK,kBAAkB,CAACN,EAAU;IAC3B,OAAO,IAAI,CAACV,aAAa,CAACI,GAAG,CAAgC,IAAI,CAACC,YAAY,GAC1E,wBAAwB,GAAGK,EAAE,CAAC,CAACJ,IAAI,CAACV,GAAG,CAACqB,IAAI,IAAG;MAAE,IAAI,CAACC,oBAAoB,GAAGD,IAAI,CAACV,KAAK;IAAC,CAAC,CAAC,CAAC;EACjG;EAGAY,iBAAiB,CAACT,EAAU;IAC1B,OAAO,IAAI,CAACV,aAAa,CAACI,GAAG,CAAgC,IAAI,CAACC,YAAY,GAC1E,uBAAuB,GAAGK,EAAE,CAAC,CAACJ,IAAI,CAACV,GAAG,CAACqB,IAAI,IAAG;MAAE,IAAI,CAACG,iBAAiB,GAAGH,IAAI,CAACV,KAAK;IAAC,CAAC,CAAC,CAAC;EAC7F;EAEAc,YAAY,CAACX,EAAU;IACrB,OAAO,IAAI,CAACV,aAAa,CAACsB,GAAG,CAAkC,IAAI,CAACjB,YAAY,GAC5E,gBAAgB,EAAE;MAACK,EAAE,EAAEA;IAAE,CAAC,CAAC;EACjC;;AA/CWZ,YAAY;mBAAZA,YAAY;AAAA;AAAZA,YAAY;SAAZA,YAAY;EAAAyB,SAAZzB,YAAY;EAAA0B,YAFX;AAAM","names":["tap","environment","CitasService","constructor","httpPedirCita","baseUrl","fetchHorasDisponibles","fecha","get","pedirCitaUrl","pipe","citas","_citasReservadas","insertCita","id","donacion","console","log","post","mandarCorreo","fetchCitaPendiente","resp","_citasPendientesUser","fetchCitasPasadas","_citasPasadasUser","cancelarCita","put","factory","providedIn"],"sourceRoot":"","sources":["/home/mario/donantesSangrePuertollano/front/src/app/citas/services/citas.service.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { tap } from 'rxjs';\nimport { environment } from 'src/environment/environment';\nimport * as interfaces from '../interfaces/citas.interface';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CitasService {\n  private pedirCitaUrl = `${environment.baseUrl}/api/citas`;\n  private _horasCitas: any;\n  private _citasReservadas: any;\n  private _citasPendientesUser: interfaces.Cita[];\n  private _citasPasadasUser: interfaces.Cita[];\n\n  constructor(private httpPedirCita: HttpClient) { }\n\n  fetchHorasDisponibles(fecha: string) {\n    return this.httpPedirCita.get<interfaces.HorarioCitasResponse>(this.pedirCitaUrl \n      + '/gethorasdisponibles/' + fecha).pipe(tap(citas => this._citasReservadas = citas));\n  }\n\n  // fetchHorarioCitas() {\n  //   return this.httpPedirCita.get<interfaces.HorarioCitasResponse>(this.pedirCitaUrl\n  //     + '/gethorariocitas').pipe(tap(horas => this._horasCitas = horas));\n  // }\n\n  insertCita(id: string, fecha: string, donacion: string) {\n    console.log('donacion');\n    console.log(donacion);\n    return this.httpPedirCita.post<interfaces.SuccessMsgResponse>(this.pedirCitaUrl\n      + '/pedircita', {id: id, fecha: fecha, donacion: donacion});\n  }\n\n\n  mandarCorreo(id:string, fecha: string, donacion: string) {\n    return this.httpPedirCita.post<interfaces.SuccessMsgResponse>(this.pedirCitaUrl\n      + '/mandarcorreocita', {id: id, fecha: fecha, donacion: donacion});\n  }\n\n\n  fetchCitaPendiente(id: string) {\n    return this.httpPedirCita.get<interfaces.FetchCitasResponse>(this.pedirCitaUrl\n      + '/getcitapendienteuser/' + id).pipe(tap(resp => {this._citasPendientesUser = resp.citas;}));\n  }\n\n  \n  fetchCitasPasadas(id: string) {\n    return this.httpPedirCita.get<interfaces.FetchCitasResponse>(this.pedirCitaUrl\n      + '/getcitaspasadasuser/' + id).pipe(tap(resp => {this._citasPasadasUser = resp.citas;}));\n  }\n\n  cancelarCita(id: string) {\n    return this.httpPedirCita.put<interfaces.CancelarCitaResponse>(this.pedirCitaUrl\n      + '/cancelarcita/', {id: id});\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}