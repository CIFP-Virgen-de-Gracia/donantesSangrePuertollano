{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./service/galeria.service\";\nimport * as i2 from \"src/app/auth/services/auth.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"ngx-pagination\";\nimport * as i5 from \"./add-imagen/add-imagen.component\";\nfunction GaleriaComponent_ng_container_6_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵlistener(\"click\", function GaleriaComponent_ng_container_6_div_1_Template_div_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.fotoSeleccionada($event));\n    });\n    i0.ɵɵelementStart(1, \"label\", 12);\n    i0.ɵɵelement(2, \"img\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const imagen_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"for\", imagen_r5.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"../../assets/imagenes/galeria/\", imagen_r5.nombre, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"id\", imagen_r5.id);\n    i0.ɵɵpropertyInterpolate(\"alt\", imagen_r5.nombre);\n  }\n}\nconst _c0 = function (a1) {\n  return {\n    itemsPerPage: 6,\n    currentPage: a1\n  };\n};\nfunction GaleriaComponent_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, GaleriaComponent_ng_container_6_div_1_Template, 4, 4, \"div\", 9);\n    i0.ɵɵpipe(2, \"paginate\");\n    i0.ɵɵelementStart(3, \"pagination-controls\", 10);\n    i0.ɵɵlistener(\"pageChange\", function GaleriaComponent_ng_container_6_Template_pagination_controls_pageChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.p = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(2, 1, ctx_r0.galeria_imagenes, i0.ɵɵpureFunction1(4, _c0, ctx_r0.p)));\n  }\n}\nfunction GaleriaComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"h1\");\n    i0.ɵɵtext(2, \"No hay ninguna imagen disponible\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction GaleriaComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"div\", 17)(2, \"button\", 18, 19);\n    i0.ɵɵtext(4, \"Subir foto\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 17)(6, \"button\", 20, 21);\n    i0.ɵɵlistener(\"click\", function GaleriaComponent_div_9_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.eliminandoFotos());\n    });\n    i0.ɵɵtext(8, \"Eliminar fotos\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nexport class GaleriaComponent {\n  constructor(galeriaServicio, AuthService) {\n    this.galeriaServicio = galeriaServicio;\n    this.AuthService = AuthService;\n    this.p = 1;\n    this.imagenesSeleccionadas = [];\n    this.galeria_imagenes = [];\n    this.puedeModificar = false;\n    this.estaRegistrado = false;\n  }\n  ngOnInit() {\n    this.galeriaServicio.getGaleria_Imagenes().subscribe(imagen => {\n      this.galeria_imagenes = imagen;\n    });\n    const user = localStorage.getItem('user');\n    if (user) {\n      this.estaRegistrado = true;\n      this.comprobarPuedeModificar();\n    }\n    this.galeriaServicio.comprobarPermisos.subscribe(registrado => {\n      this.estaRegistrado = registrado;\n      this.comprobarPuedeModificar();\n    });\n  }\n  eliminandoFotos() {\n    this.imagenesSeleccionadas.forEach(id => {\n      this.galeriaServicio.borrarImagenes(id).subscribe(res => {\n        this.mostrarImagenes();\n      });\n    });\n  }\n  mostrarImagenes() {\n    this.galeriaServicio.getGaleria_Imagenes().subscribe(imagen => {\n      this.galeria_imagenes = imagen;\n    });\n  }\n  fotoSeleccionada(event) {\n    if (event.target.type == 'checkbox') {\n      if (event.target.checked) {\n        this.imagenesSeleccionadas.push(event.target.id);\n      } else {\n        let i = this.imagenesSeleccionadas.indexOf(event.target.id);\n        this.imagenesSeleccionadas.splice(i, 1);\n      }\n    }\n  }\n  comprobarPuedeModificar() {\n    if (this.estaRegistrado) {\n      this.AuthService.puedeModificar().subscribe(resp => {\n        this.puedeModificar = resp ? true : false;\n      });\n    }\n  }\n}\nGaleriaComponent.ɵfac = function GaleriaComponent_Factory(t) {\n  return new (t || GaleriaComponent)(i0.ɵɵdirectiveInject(i1.GaleriaService), i0.ɵɵdirectiveInject(i2.AuthService));\n};\nGaleriaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: GaleriaComponent,\n  selectors: [[\"app-galeria\"]],\n  decls: 11,\n  vars: 3,\n  consts: [[1, \"row\", \"w-100\"], [1, \"row\"], [1, \"col-12\", \"text-center\", \"mt-5\", \"mb-4\"], [1, \"titulo\", \"subrayado\"], [1, \"row\", \"d-flex\", \"justify-content-center\", \"align-items-center\", \"g-2\", \"g-lg-3\", \"w-100\"], [4, \"ngIf\", \"ngIfElse\"], [\"ningunMensaje\", \"\"], [\"class\", \"row d-flex justify-content-evenly mb-3\", 4, \"ngIf\"], [3, \"recargarImagenes\"], [\"class\", \"col-md-4 col-sm-6 col-12 p-3 custom-control custom-checkbox image-checkbox text-center\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"previousLabel\", \"Anterior\", \"nextLabel\", \"Siguiente\", 1, \"text-center\", 3, \"pageChange\"], [1, \"col-md-4\", \"col-sm-6\", \"col-12\", \"p-3\", \"custom-control\", \"custom-checkbox\", \"image-checkbox\", \"text-center\", 3, \"click\"], [1, \"custom-control-label\", 3, \"for\"], [1, \"img-fluid\", \"w-50\", 3, \"src\"], [\"type\", \"checkbox\", 1, \"custom-control-input\", \"checkbox-inline\", 3, \"id\", \"alt\"], [1, \"col-12\", \"text-center\", \"mb-3\"], [1, \"row\", \"d-flex\", \"justify-content-evenly\", \"mb-3\"], [1, \"col-md-6\", \"col-12\", \"text-center\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#modalSubirFoto\", 1, \"btn\", \"btn-danger\", \"border-3\", \"rounded-2\", \"w-50\", \"mb-2\"], [\"boton_A\\u00F1adir\", \"\"], [1, \"btn\", \"btn-danger\", \"border-3\", \"rounded-2\", \"w-50\", \"mb-2\", 3, \"click\"], [\"boton_Eliminar\", \"\"]],\n  template: function GaleriaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h1\", 3);\n      i0.ɵɵtext(4, \"Galeria: \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(5, \"div\", 4);\n      i0.ɵɵtemplate(6, GaleriaComponent_ng_container_6_Template, 4, 6, \"ng-container\", 5);\n      i0.ɵɵtemplate(7, GaleriaComponent_ng_template_7_Template, 3, 0, \"ng-template\", null, 6, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(9, GaleriaComponent_div_9_Template, 9, 0, \"div\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"app-add-imagen\", 8);\n      i0.ɵɵlistener(\"recargarImagenes\", function GaleriaComponent_Template_app_add_imagen_recargarImagenes_10_listener() {\n        return ctx.mostrarImagenes();\n      });\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(8);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.galeria_imagenes.length > 0)(\"ngIfElse\", _r1);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.puedeModificar);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.PaginationControlsComponent, i5.AddImagenComponent, i4.PaginatePipe],\n  styles: [\".custom-control.image-checkbox[_ngcontent-%COMP%] {\\n  position: relative;\\n  padding-left: 0 !important;\\n}\\n.custom-control.image-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] {\\n  box-sizing: border-box;\\n  padding: 0 !important;\\n}\\n.custom-control.image-checkbox[_ngcontent-%COMP%]   input[type=checkbox].custom-control-input[_ngcontent-%COMP%] {\\n  z-index: -1;\\n  opacity: 0;\\n}\\n.custom-control.image-checkbox[_ngcontent-%COMP%]   input[type=checkbox].custom-control-input[_ngcontent-%COMP%]:hover {\\n  opacity: 0.8;\\n}\\n.custom-control.image-checkbox[_ngcontent-%COMP%]   input[type=checkbox].custom-control-input[_ngcontent-%COMP%]:checked {\\n  z-index: 0;\\n  opacity: 1;\\n}\\n.custom-control.image-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n}\\n.custom-control.image-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:focus, .custom-control.image-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover {\\n  opacity: 0.8;\\n}\\n\\nbutton[_ngcontent-%COMP%]:hover {\\n  background-color: var(--color-granate-oscuro);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZ2FsZXJpYS9nYWxlcmlhLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usa0JBQUE7RUFDQSwwQkFBQTtBQUNGO0FBRUU7RUFDRSxzQkFBQTtFQUNBLHFCQUFBO0FBQUo7QUFFSTtFQUNFLFdBQUE7RUFDQSxVQUFBO0FBQU47QUFDTTtFQUNFLFlBQUE7QUFDUjtBQUNNO0VBQ0UsVUFBQTtFQUNBLFVBQUE7QUFDUjtBQUlFO0VBQ0ksZUFBQTtBQUZOO0FBSU07RUFFSSxZQUFBO0FBSFY7O0FBU0E7RUFDRSw2Q0FBQTtBQU5GIiwic291cmNlc0NvbnRlbnQiOlsiLmN1c3RvbS1jb250cm9sLmltYWdlLWNoZWNrYm94e1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICBwYWRkaW5nLWxlZnQ6IDAgIWltcG9ydGFudDtcclxuXHJcblxyXG4gIGlucHV0W3R5cGU9Y2hlY2tib3hde1xyXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAgIHBhZGRpbmc6IDAgIWltcG9ydGFudDtcclxuXHJcbiAgICAmLmN1c3RvbS1jb250cm9sLWlucHV0e1xyXG4gICAgICB6LWluZGV4OiAtMTtcclxuICAgICAgb3BhY2l0eTogMDtcclxuICAgICAgJjpob3ZlcntcclxuICAgICAgICBvcGFjaXR5OiAuODtcclxuICAgICAgfVxyXG4gICAgICAmOmNoZWNrZWR7XHJcbiAgICAgICAgei1pbmRleDogMDtcclxuICAgICAgICBvcGFjaXR5OiAxO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBsYWJlbHtcclxuICAgICAgY3Vyc29yOiBwb2ludGVyO1xyXG5cclxuICAgICAgJjpmb2N1cyxcclxuICAgICAgJjpob3ZlcntcclxuICAgICAgICAgIG9wYWNpdHk6IC44O1xyXG4gICAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5cclxuYnV0dG9uOmhvdmVye1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLWdyYW5hdGUtb3NjdXJvKTtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","GaleriaComponent","constructor","galeriaServicio","AuthService","ngOnInit","getGaleria_Imagenes","subscribe","imagen","galeria_imagenes","user","localStorage","getItem","estaRegistrado","comprobarPuedeModificar","comprobarPermisos","registrado","eliminandoFotos","imagenesSeleccionadas","forEach","id","borrarImagenes","res","mostrarImagenes","fotoSeleccionada","event","target","type","checked","push","i","indexOf","splice","puedeModificar","resp","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Alicia\\Documents\\Clase\\DAW\\Segundo\\Desafio3_DonantesSangre\\donantesSangrePuertollano\\front\\src\\app\\galeria\\galeria.component.html","C:\\Users\\Alicia\\Documents\\Clase\\DAW\\Segundo\\Desafio3_DonantesSangre\\donantesSangrePuertollano\\front\\src\\app\\galeria\\galeria.component.ts"],"sourcesContent":["<div class=\"row w-100\">\r\n  <div class=\"row\">\r\n    <div class=\"col-12 text-center mt-5 mb-4\">\r\n      <h1 class=\"titulo subrayado\">Galeria: </h1>\r\n    </div>\r\n  </div>\r\n  <div class=\"row d-flex justify-content-center align-items-center g-2 g-lg-3 w-100\">\r\n    <ng-container *ngIf=\"this.galeria_imagenes.length > 0; else ningunMensaje\">\r\n      <div (click)=\"fotoSeleccionada($event)\" class=\"col-md-4 col-sm-6 col-12 p-3 custom-control custom-checkbox image-checkbox text-center\"\r\n      *ngFor=\"let imagen of this.galeria_imagenes | paginate: { itemsPerPage: 6, currentPage: p } \">\r\n        <label class=\"custom-control-label\" for=\"{{imagen.id}}\">\r\n          <img  class=\"img-fluid w-50\" src=\"../../assets/imagenes/galeria/{{imagen.nombre}}\">\r\n        </label>\r\n        <input type=\"checkbox\" class=\"custom-control-input checkbox-inline\" id=\"{{imagen.id}}\" alt=\"{{imagen.nombre}}\">\r\n      </div>\r\n      <pagination-controls (pageChange)=\"p = $event\" previousLabel=\"Anterior\" nextLabel=\"Siguiente\" class=\"text-center\">\r\n      </pagination-controls>\r\n    </ng-container>\r\n    <ng-template #ningunMensaje>\r\n      <div class=\"col-12 text-center mb-3\">\r\n        <h1>No hay ninguna imagen disponible</h1>\r\n      </div>\r\n    </ng-template>\r\n    <!-- <div class=\"col-md-4 col-sm-6 col-12 p-3 custom-control custom-checkbox image-checkbox text-center\">\r\n      <label class=\"custom-control-label\" for=\"1\">\r\n        <img class=\"img-fluid w-50 border border-3 border-dark rounded-3\" src=\"../../assets/imagenes/apto_sangre/viaje.png\">\r\n      </label>\r\n      <input type=\"checkbox\" class=\"custom-control-input checkbox-inline\" id=\"1\">\r\n    </div>\r\n    <div class=\"col-md-4 col-sm-6 col-12 p-3 custom-control custom-checkbox image-checkbox text-center\">\r\n      <label class=\"custom-control-label\" for=\"2\">\r\n        <img class=\"img-fluid w-50 border border-3 border-dark rounded-3\" src=\"../../assets/imagenes/apto_sangre/donar.png\">\r\n      </label>\r\n      <input type=\"checkbox\" class=\"custom-control-input checkbox-inline\" id=\"2\">\r\n    </div>\r\n    <div class=\"col-md-4 col-sm-6 col-12 p-3 custom-control custom-checkbox image-checkbox text-center\">\r\n      <label class=\"custom-control-label\" for=\"3\">\r\n        <img class=\"img-fluid w-50 border border-3 border-dark rounded-3\" src=\"../../assets/imagenes/apto_sangre/edad.png\">\r\n      </label>\r\n      <input type=\"checkbox\" class=\"custom-control-input checkbox-inline\" id=\"3\">\r\n    </div>\r\n\r\n    <div class=\"col-md-4 col-sm-6 col-12 p-3 custom-control custom-checkbox image-checkbox text-center\">\r\n      <label class=\"custom-control-label\" for=\"4\">\r\n        <img class=\"img-fluid w-50 border border-3 border-dark rounded-3\" src=\"../../assets/imagenes/apto_sangre/embarazo.png\">\r\n      </label>\r\n      <input type=\"checkbox\" class=\"custom-control-input checkbox-inline\" id=\"4\">\r\n    </div>\r\n\r\n    <div class=\"col-md-4 col-sm-6 col-12 p-3 custom-control custom-checkbox image-checkbox text-center\">\r\n      <label class=\"custom-control-label\" for=\"5\">\r\n        <img class=\"img-fluid w-50 border border-3 border-dark rounded-3\" src=\"../../assets/imagenes/apto_sangre/enfermedad.png\">\r\n      </label>\r\n      <input type=\"checkbox\" class=\"custom-control-input checkbox-inline\" id=\"5\">\r\n    </div>\r\n\r\n    <div class=\"col-md-4 col-sm-6 col-12 p-3 custom-control custom-checkbox image-checkbox text-center\">\r\n      <label class=\"custom-control-label\" for=\"6\">\r\n        <img class=\"img-fluid w-50 border border-3 border-dark rounded-3\" src=\"../../assets/imagenes/apto_sangre/peso.png\">\r\n      </label>\r\n      <input type=\"checkbox\" class=\"custom-control-input checkbox-inline\" id=\"6\">\r\n    </div> -->\r\n\r\n  </div>\r\n  <div *ngIf=\"puedeModificar\" class=\"row d-flex justify-content-evenly mb-3\">\r\n    <div class=\"col-md-6 col-12 text-center\">\r\n      <button #boton_Añadir class=\"btn btn-danger border-3 rounded-2 w-50 mb-2\" data-bs-toggle=\"modal\"\r\n      data-bs-target=\"#modalSubirFoto\">Subir foto</button>\r\n\r\n    </div>\r\n    <div class=\"col-md-6 col-12 text-center\">\r\n      <button #boton_Eliminar class=\"btn btn-danger border-3 rounded-2 w-50 mb-2\" (click)=\"eliminandoFotos()\">Eliminar fotos</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Modal -->\r\n<app-add-imagen (recargarImagenes)=\"mostrarImagenes()\"></app-add-imagen>\r\n","import { Component, ViewChild, ElementRef, Renderer2, OnInit, SimpleChanges } from '@angular/core';\r\nimport { GaleriaService } from './service/galeria.service';\r\nimport { Galeria } from './interface/galeria';\r\nimport { AuthService } from 'src/app/auth/services/auth.service';\r\n@Component({\r\n  selector: 'app-galeria',\r\n  templateUrl: './galeria.component.html',\r\n  styleUrls: ['./galeria.component.scss']\r\n})\r\nexport class GaleriaComponent implements OnInit{\r\n  p: number = 1;\r\n  imagenesSeleccionadas: any[] = [];\r\n  galeria_imagenes: Galeria[] = [];\r\n  puedeModificar: boolean = false;\r\n  estaRegistrado: boolean = false;\r\n\r\n  constructor(public galeriaServicio: GaleriaService, private AuthService: AuthService) { }\r\n\r\n\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.galeriaServicio.getGaleria_Imagenes().subscribe( imagen => {this.galeria_imagenes = imagen});\r\n\r\n\r\n    const user = localStorage.getItem('user');\r\n    if (user) {\r\n      this.estaRegistrado = true;\r\n\r\n      this.comprobarPuedeModificar();\r\n    }\r\n\r\n    this.galeriaServicio.comprobarPermisos.subscribe((registrado:boolean) => {\r\n      this.estaRegistrado = registrado;\r\n\r\n      this.comprobarPuedeModificar();\r\n    })\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n  eliminandoFotos(): void{\r\n\r\n    this.imagenesSeleccionadas.forEach(id => {\r\n      this.galeriaServicio.borrarImagenes(id).subscribe((res) => {\r\n        this.mostrarImagenes();\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  mostrarImagenes(): void{\r\n    this.galeriaServicio.getGaleria_Imagenes().subscribe( imagen => {this.galeria_imagenes = imagen});\r\n  }\r\n\r\n  fotoSeleccionada(event: any): void{\r\n    if(event.target.type == 'checkbox'){\r\n      if(event.target.checked){\r\n        this.imagenesSeleccionadas.push(event.target.id);\r\n      }\r\n      else{\r\n        let i = this.imagenesSeleccionadas.indexOf(event.target.id);\r\n        this.imagenesSeleccionadas.splice(i, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n  comprobarPuedeModificar() {\r\n    if (this.estaRegistrado) {\r\n      this.AuthService.puedeModificar().subscribe((resp:boolean) => {\r\n        this.puedeModificar = (resp) ? true : false;\r\n      });\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}