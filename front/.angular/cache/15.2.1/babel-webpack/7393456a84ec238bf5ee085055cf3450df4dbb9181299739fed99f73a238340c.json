{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Alicia/Documents/Clase/DAW/Segundo/Desafio3_DonantesSangre/donantesSangrePuertollano/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgbDatepickerModule } from '@ng-bootstrap/ng-bootstrap';\nlet ModalPedirCitaComponent = class ModalPedirCitaComponent {\n  constructor(modalService, citasService, router) {\n    this.modalService = modalService;\n    this.citasService = citasService;\n    this.router = router;\n    this.closeResult = '';\n    this.registrado = false;\n    this.puedePedirCita = false;\n  }\n  ngAfterViewInit() {\n    this.openModal();\n  }\n  openModal() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      // const user = localStorage.getItem('user');\n      // let id: string;\n      // if (user) {\n      //   this.registrado = true;\n      //   id = JSON.parse(user).id;\n      //   const resp = await firstValueFrom(this.citasService.compHaPedidoCita(id));\n      //   this.puedePedirCita = resp.success;\n      // }\n      // else {\n      //   this.registrado = false;\n      // }\n      // if (!this.registrado || !this.puedePedirCita) {\n      //   this.modalService.open(this.content, { centered: true });\n      // }\n      _this.modalService.open(_this.content, {\n        centered: true\n      });\n    })();\n  }\n  open(content) {\n    this.modalService.open(content, {\n      ariaLabelledBy: 'modal-basic-title',\n      backdrop: 'static',\n      keyboard: false\n    }).result.then(result => {\n      this.closeResult = `Closed with: ${result}`;\n    });\n  }\n  irAlLogin() {\n    this.router.navigate(['/auth/login']);\n    this.modalService.dismissAll();\n  }\n  atras() {\n    this.modalService.dismissAll();\n  }\n};\n__decorate([ViewChild('content')], ModalPedirCitaComponent.prototype, \"content\", void 0);\nModalPedirCitaComponent = __decorate([Component({\n  selector: 'app-modal-pedir-cita',\n  standalone: true,\n  imports: [NgbDatepickerModule, CommonModule],\n  templateUrl: './modal-pedir-cita.component.html',\n  styleUrls: ['./modal-pedir-cita.component.scss']\n})], ModalPedirCitaComponent);\nexport { ModalPedirCitaComponent };","map":{"version":3,"mappings":";;AAAA,SAASA,SAAS,EAAcC,SAAS,QAAQ,eAAe;AAChE,SAASC,YAAY,QAAQ,iBAAiB;AAE9C,SAASC,mBAAmB,QAAkB,4BAA4B;AAYnE,IAAMC,uBAAuB,GAA7B,MAAMA,uBAAuB;EAOlCC,YACUC,YAAsB,EACtBC,YAA0B,EAC1BC,MAAc;IAFd,iBAAY,GAAZF,YAAY;IACZ,iBAAY,GAAZC,YAAY;IACZ,WAAM,GAANC,MAAM;IAThB,gBAAW,GAAG,EAAE;IAChB,eAAU,GAAG,KAAK;IAClB,mBAAc,GAAG,KAAK;EAOK;EAG3BC,eAAe;IACb,IAAI,CAACC,SAAS,EAAE;EAClB;EAEMA,SAAS;IAAA;IAAA;MAEb;MAGA;MACA;MACA;MACA;MAEA;MAEA;MACA;MACA;MACA;MACA;MAGA;MACA;MACA;MAEA,KAAI,CAACJ,YAAY,CAACK,IAAI,CAAC,KAAI,CAACC,OAAO,EAAE;QAAEC,QAAQ,EAAE;MAAI,CAAE,CAAC;IAAC;EAC3D;EAEDF,IAAI,CAACC,OAAY;IACd,IAAI,CAACN,YAAY,CAACK,IAAI,CAACC,OAAO,EAAE;MAAEE,cAAc,EAAE,mBAAmB;MAAEC,QAAQ,EAAE,QAAQ;MAAEC,QAAQ,EAAE;IAAK,CAAE,CAAC,CAACC,MAAM,CAACC,IAAI,CACtHD,MAAM,IAAI;MACT,IAAI,CAACE,WAAW,GAAG,gBAAgBF,MAAM,EAAE;IAC7C,CAAC,CACF;EACJ;EAGCG,SAAS;IACP,IAAI,CAACZ,MAAM,CAACa,QAAQ,CAAC,CAAC,aAAa,CAAC,CAAC;IACrC,IAAI,CAACf,YAAY,CAACgB,UAAU,EAAE;EAChC;EAEAC,KAAK;IACH,IAAI,CAACjB,YAAY,CAACgB,UAAU,EAAE;EAChC;CAED;AAxDuBE,YAArBvB,SAAS,CAAC,SAAS,CAAC,wDAAsB;AALhCG,uBAAuB,eAPnCJ,SAAS,CAAC;EACTyB,QAAQ,EAAE,sBAAsB;EAChCC,UAAU,EAAE,IAAI;EACjBC,OAAO,EAAE,CAACxB,mBAAmB,EAAED,YAAY,CAAC;EAC3C0B,WAAW,EAAE,mCAAmC;EAChDC,SAAS,EAAE,CAAC,mCAAmC;CAChD,CAAC,GACWzB,uBAAuB,CA6DnC;SA7DYA,uBAAuB","names":["Component","ViewChild","CommonModule","NgbDatepickerModule","ModalPedirCitaComponent","constructor","modalService","citasService","router","ngAfterViewInit","openModal","open","content","centered","ariaLabelledBy","backdrop","keyboard","result","then","closeResult","irAlLogin","navigate","dismissAll","atras","__decorate","selector","standalone","imports","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\Alicia\\Documents\\Clase\\DAW\\Segundo\\Desafio3_DonantesSangre\\donantesSangrePuertollano\\front\\src\\app\\shared\\modal-pedir-cita\\modal-pedir-cita.component.ts"],"sourcesContent":["import { Component, ElementRef, ViewChild } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Router } from '@angular/router';\r\nimport { NgbDatepickerModule, NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { CitasService } from 'src/app/citas/services/citas.service';\r\nimport { RegistroComponent } from 'src/app/auth/registro/registro.component';\r\nimport { firstValueFrom } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-modal-pedir-cita',\r\n  standalone: true,\r\n\timports: [NgbDatepickerModule, CommonModule],\r\n  templateUrl: './modal-pedir-cita.component.html',\r\n  styleUrls: ['./modal-pedir-cita.component.scss']\r\n})\r\nexport class ModalPedirCitaComponent {\r\n  closeResult = '';\r\n  registrado = false;\r\n  puedePedirCita = false;\r\n\r\n  @ViewChild('content') content!: ElementRef;\r\n\t\r\n  constructor(\r\n    private modalService: NgbModal,\r\n    private citasService: CitasService,\r\n    private router: Router) {}\r\n\r\n\r\n  ngAfterViewInit() {\r\n    this.openModal();\r\n  }\r\n\r\n  async openModal(){\r\n\r\n    // const user = localStorage.getItem('user');\r\n\r\n\r\n    // let id: string;\r\n    // if (user) {\r\n    //   this.registrado = true;\r\n    //   id = JSON.parse(user).id;\r\n\r\n    //   const resp = await firstValueFrom(this.citasService.compHaPedidoCita(id));\r\n      \r\n    //   this.puedePedirCita = resp.success;\r\n    // }\r\n    // else {\r\n    //   this.registrado = false;\r\n    // }\r\n\r\n\r\n    // if (!this.registrado || !this.puedePedirCita) {\r\n    //   this.modalService.open(this.content, { centered: true });\r\n    // }\r\n\r\n    this.modalService.open(this.content, { centered: true });\r\n  }\r\n\r\n\topen(content: any) {\r\n    this.modalService.open(content, { ariaLabelledBy: 'modal-basic-title', backdrop: 'static', keyboard: false }).result.then(\r\n      (result) => {\r\n        this.closeResult = `Closed with: ${result}`;\r\n      }\r\n    );\r\n\t}\r\n\r\n\r\n  irAlLogin() {\r\n    this.router.navigate(['/auth/login']);\r\n    this.modalService.dismissAll();\r\n  }\r\n\r\n  atras() {\r\n    this.modalService.dismissAll();\r\n  }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}