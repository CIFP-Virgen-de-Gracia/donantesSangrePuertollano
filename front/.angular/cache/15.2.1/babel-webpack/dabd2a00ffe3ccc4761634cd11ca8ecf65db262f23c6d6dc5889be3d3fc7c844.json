{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/config.service\";\nimport * as i2 from \"src/app/shared/services/shared.service\";\nexport class ContactoConfigComponent {\n  constructor(ConfigService, SharedService) {\n    this.ConfigService = ConfigService;\n    this.SharedService = SharedService;\n    this.mensaje = '';\n    this.telefonos = [];\n    this.tBorrar = [];\n    this.direcciones = [];\n    this.horarios = [];\n    this.hMostrar = [];\n    this.dSemana = [{\n      nombre: \"Lunes\",\n      letra: \"L\"\n    }, {\n      nombre: \"Martes\",\n      letra: \"M\"\n    }, {\n      nombre: \"Miércoles\",\n      letra: \"X\"\n    }, {\n      nombre: \"Jueves\",\n      letra: \"J\"\n    }, {\n      nombre: \"Viernes\",\n      letra: \"V\"\n    }];\n  }\n  ngOnInit() {\n    this.SharedService.getHorarios().subscribe(resp => {\n      if (resp.success) {\n        this.horarios = resp.data;\n        this.crearHorarioMostrar();\n      }\n    });\n    this.SharedService.getTelefonos().subscribe(resp => {\n      if (resp.success) this.telefonos = resp.data;\n    });\n    this.SharedService.getDirecciones().subscribe(resp => {\n      if (resp.success) this.direcciones = resp.data;\n    });\n  }\n  guardar() {\n    const tlfns = {\n      guardar: this.telefonos,\n      borrar: this.tBorrar\n    };\n    const horarios = this.crearHorarioGuardar();\n    this.ConfigService.updateContacto(this.direcciones, tlfns, horarios).subscribe(resp => {\n      this.mensaje = resp.msg;\n      this.actualizado = resp.success ? true : false;\n      setTimeout(() => this.mensaje = '', 4000);\n    });\n  }\n  addTelefono() {\n    this.telefonos.push({\n      id: -1,\n      numero: \"\",\n      extension: 0\n    });\n  }\n  addHorario() {\n    let listaDias = [];\n    this.dSemana.forEach(dia => {\n      listaDias.push(this.crearDia(dia.nombre, dia.letra, false));\n    });\n    this.addHorarioMostrar(listaDias);\n  }\n  deleteHorario(event) {}\n  deleteTelefono(index) {\n    const tlfn = this.telefonos.splice(index, 1);\n    this.tBorrar.push(tlfn[0].id);\n  }\n  crearHorarioGuardar() {\n    let hGuardar = [];\n    let hBorrar = [];\n    this.hMostrar.forEach(horario => {\n      horario.dias.forEach(d => {\n        if (d.seleccionado) {\n          hGuardar.push({\n            id: d.id,\n            dia: d.valor,\n            hEntrada: horario.hEntrada,\n            hSalida: horario.hSalida\n          });\n        } else if (d.id != -1) hBorrar.push(d.id);\n      });\n    });\n    return {\n      guardar: hGuardar,\n      borrar: hBorrar\n    };\n  }\n  crearHorarioMostrar() {\n    let horas = [];\n    let diasHora = [];\n    let listaDias;\n    let idDia;\n    let selecc;\n    this.horarios.forEach(horario => {\n      if (!horas.find(h => h.entrada == horario.hEntrada && h.salida == horario.hSalida)) horas.push({\n        \"entrada\": horario.hEntrada,\n        \"salida\": horario.hSalida\n      });\n    });\n    horas.forEach(hora => {\n      listaDias = [];\n      diasHora = this.horarios.filter(h => h.hEntrada == hora.entrada && h.hSalida == hora.salida);\n      this.dSemana.forEach(dia => {\n        idDia = diasHora.find(d => d.dia == dia.nombre)?.id;\n        selecc = diasHora.find(d => d.dia == dia.nombre) ? true : false;\n        listaDias.push(this.crearDia(dia.nombre, dia.letra, selecc, idDia));\n      });\n      this.addHorarioMostrar(listaDias, hora.entrada, hora.salida);\n    });\n  }\n  addHorarioMostrar(listaDias, entrada = {\n    hours: 0,\n    minutes: 0\n  }, salida = {\n    hours: 0,\n    minutes: 0\n  }) {\n    this.hMostrar.push({\n      dias: listaDias,\n      hEntrada: entrada,\n      hSalida: salida\n    });\n  }\n  crearDia(valor, letra, selecc, id = -1) {\n    return {\n      id: id,\n      valor: valor,\n      letra: letra,\n      seleccionado: selecc\n    };\n  }\n}\nContactoConfigComponent.ɵfac = function ContactoConfigComponent_Factory(t) {\n  return new (t || ContactoConfigComponent)(i0.ɵɵdirectiveInject(i1.ConfigService), i0.ɵɵdirectiveInject(i2.SharedService));\n};\nContactoConfigComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ContactoConfigComponent,\n  selectors: [[\"app-contacto-config\"]],\n  decls: 2,\n  vars: 0,\n  template: function ContactoConfigComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p\");\n      i0.ɵɵtext(1, \"contacto-config works!\");\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\".botones[_ngcontent-%COMP%] {\\n  margin-bottom: 1rem;\\n}\\n\\n.horarios[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .telefonos[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .direcciones[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n  color: var(--color-contraste-oscuro);\\n}\\n.horarios[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, .telefonos[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, .direcciones[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover {\\n  color: var(--color-primario);\\n}\\n.horarios[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .telefonos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .direcciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  margin-top: 2.5rem;\\n}\\n.horarios[_ngcontent-%COMP%]   .inpt[_ngcontent-%COMP%], .horarios[_ngcontent-%COMP%]   .f-rojo[_ngcontent-%COMP%], .telefonos[_ngcontent-%COMP%]   .inpt[_ngcontent-%COMP%], .telefonos[_ngcontent-%COMP%]   .f-rojo[_ngcontent-%COMP%], .direcciones[_ngcontent-%COMP%]   .inpt[_ngcontent-%COMP%], .direcciones[_ngcontent-%COMP%]   .f-rojo[_ngcontent-%COMP%] {\\n  padding: 0.5rem;\\n}\\n.horarios[_ngcontent-%COMP%]   .horario[_ngcontent-%COMP%]:not(:first-of-type), .horarios[_ngcontent-%COMP%]   .telefono[_ngcontent-%COMP%]:not(:first-of-type), .telefonos[_ngcontent-%COMP%]   .horario[_ngcontent-%COMP%]:not(:first-of-type), .telefonos[_ngcontent-%COMP%]   .telefono[_ngcontent-%COMP%]:not(:first-of-type), .direcciones[_ngcontent-%COMP%]   .horario[_ngcontent-%COMP%]:not(:first-of-type), .direcciones[_ngcontent-%COMP%]   .telefono[_ngcontent-%COMP%]:not(:first-of-type) {\\n  margin-top: 3.5rem;\\n}\\n.horarios[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .horarios[_ngcontent-%COMP%]   .telefono[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .telefonos[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .telefonos[_ngcontent-%COMP%]   .telefono[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .direcciones[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .direcciones[_ngcontent-%COMP%]   .telefono[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n\\n.telefonos[_ngcontent-%COMP%], .direcciones[_ngcontent-%COMP%] {\\n  margin-top: 4rem;\\n}\\n\\n.horarios[_ngcontent-%COMP%]   .horario[_ngcontent-%COMP%] {\\n  position: relative;\\n  border-bottom: 2px solid var(--color-primario);\\n  \\n}\\n.horarios[_ngcontent-%COMP%]   .horario[_ngcontent-%COMP%]   .dia[_ngcontent-%COMP%]:not(:last-of-type)   label[_ngcontent-%COMP%] {\\n  margin-right: 1.5rem;\\n}\\n\\n.telefonos[_ngcontent-%COMP%]   .telefono[_ngcontent-%COMP%] {\\n  border-bottom: 2px solid var(--color-primario);\\n}\\n.telefonos[_ngcontent-%COMP%]   .telefono[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  font-size: unset;\\n}\\n\\n.direcciones[_ngcontent-%COMP%]   .direccion[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-template-columns: repeat(2, 1fr);\\n  column-gap: 3.5rem;\\n}\\n.direcciones[_ngcontent-%COMP%]   .direccion[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%] {\\n  margin-bottom: 3.5rem;\\n}\\n.direcciones[_ngcontent-%COMP%]   .direccion[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%]   .valor[_ngcontent-%COMP%] {\\n  border: none;\\n  outline: none;\\n  border-bottom: 2px solid var(--color-primario);\\n}\\n\\n@media (max-width: 768px) {\\n  .direcciones[_ngcontent-%COMP%]   .direccion[_ngcontent-%COMP%] {\\n    grid-template-columns: 1fr;\\n  }\\n  .telefonos[_ngcontent-%COMP%]   .telefono[_ngcontent-%COMP%] {\\n    position: relative;\\n  }\\n  .telefonos[_ngcontent-%COMP%]   .telefono[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .telefonos[_ngcontent-%COMP%]   .telefono[_ngcontent-%COMP%]   .inpt[_ngcontent-%COMP%] {\\n    text-align: center;\\n  }\\n  .telefonos[_ngcontent-%COMP%]   .telefono[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\\n    width: 100%;\\n  }\\n  .telefonos[_ngcontent-%COMP%]   .telefono[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n    color: var(--bs-white);\\n    position: absolute;\\n    right: 0.5rem;\\n    top: 0.7rem;\\n  }\\n  .telefonos[_ngcontent-%COMP%]   .telefono[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover {\\n    color: var(--color-granate);\\n  }\\n}\\n@media (max-width: 1200px) {\\n  .horarios[_ngcontent-%COMP%]   .horario[_ngcontent-%COMP%]   .horas[_ngcontent-%COMP%], .horarios[_ngcontent-%COMP%]   .horario[_ngcontent-%COMP%]   .horas[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%], .horarios[_ngcontent-%COMP%]   .horario[_ngcontent-%COMP%]   .dias[_ngcontent-%COMP%] {\\n    width: 100%;\\n  }\\n  .horarios[_ngcontent-%COMP%]   .horario[_ngcontent-%COMP%]   .horas[_ngcontent-%COMP%], .horarios[_ngcontent-%COMP%]   .horario[_ngcontent-%COMP%]   .dias[_ngcontent-%COMP%], .horarios[_ngcontent-%COMP%]   .horario[_ngcontent-%COMP%]   .inpt[_ngcontent-%COMP%] {\\n    text-align: center;\\n  }\\n  .horarios[_ngcontent-%COMP%]   .horario[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n    color: var(--bs-white);\\n    position: absolute;\\n    right: 0.5rem;\\n    top: 0.7rem;\\n  }\\n  .horarios[_ngcontent-%COMP%]   .horario[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover {\\n    color: var(--color-granate);\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29uZmlnL2NvbnRhY3RvLWNvbmZpZy9jb250YWN0by1jb25maWcuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxtQkFBQTtBQUNGOztBQU1FOzs7RUFDRSxvQ0FBQTtBQURKO0FBR0k7OztFQUNFLDRCQUFBO0FBQ047QUFHRTs7O0VBQ0Usa0JBQUE7QUFDSjtBQUVFOzs7Ozs7RUFFRSxlQUFBO0FBSUo7QUFDSTs7Ozs7O0VBQ0Usa0JBQUE7QUFNTjtBQUZFOzs7Ozs7RUFFRSxXQUFBO0FBUUo7O0FBSkE7O0VBRUUsZ0JBQUE7QUFPRjs7QUFIRTtFQUNFLGtCQUFBO0VBQ0EsOENBQUE7RUFNQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tBQUE7QUE0Qko7QUFoQ0k7RUFDRSxvQkFBQTtBQWtDTjs7QUFBQTtFQUNFLDhDQUFBO0FBR0Y7QUFERTtFQUNFLGdCQUFBO0FBR0o7O0FBQ0E7RUFDRSxhQUFBO0VBQ0EscUNBQUE7RUFDQSxrQkFBQTtBQUVGO0FBQUU7RUFDRSxxQkFBQTtBQUVKO0FBQUk7RUFDRSxZQUFBO0VBQ0EsYUFBQTtFQUNBLDhDQUFBO0FBRU47O0FBSUE7RUFDRTtJQUNFLDBCQUFBO0VBREY7RUFJQTtJQUNFLGtCQUFBO0VBRkY7RUFJRTs7SUFFRSxrQkFBQTtFQUZKO0VBS0U7SUFDRSxXQUFBO0VBSEo7RUFNRTtJQUNFLHNCQUFBO0lBQ0Esa0JBQUE7SUFDQSxhQUFBO0lBQ0EsV0FBQTtFQUpKO0VBTUk7SUFDRSwyQkFBQTtFQUpOO0FBQ0Y7QUFVQTtFQUdJO0lBQ0UsV0FBQTtFQVZKO0VBYUU7SUFDRSxrQkFBQTtFQVhKO0VBY0U7SUFDRSxzQkFBQTtJQUNBLGtCQUFBO0lBQ0EsYUFBQTtJQUNBLFdBQUE7RUFaSjtFQWNJO0lBQ0UsMkJBQUE7RUFaTjtBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLmJvdG9uZXMge1xyXG4gIG1hcmdpbi1ib3R0b206IDFyZW07XHJcbn1cclxuXHJcbi5ob3JhcmlvcyxcclxuLnRlbGVmb25vcyxcclxuLmRpcmVjY2lvbmVzIHtcclxuXHJcbiAgaSB7XHJcbiAgICBjb2xvcjogdmFyKC0tY29sb3ItY29udHJhc3RlLW9zY3Vybyk7XHJcblxyXG4gICAgJjpob3ZlciB7XHJcbiAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJpbyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBidXR0b24ge1xyXG4gICAgbWFyZ2luLXRvcDogMi41cmVtO1xyXG4gIH1cclxuXHJcbiAgLmlucHQsXHJcbiAgLmYtcm9qbyB7XHJcbiAgICBwYWRkaW5nOiAuNXJlbTtcclxuICB9XHJcblxyXG4gIC5ob3JhcmlvLFxyXG4gIC50ZWxlZm9ubyB7XHJcbiAgICAmOm5vdCg6Zmlyc3Qtb2YtdHlwZSkge1xyXG4gICAgICBtYXJnaW4tdG9wOiAzLjVyZW07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZWxlY3QsXHJcbiAgLnRlbGVmb25vIGlucHV0IHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gIH1cclxufVxyXG5cclxuLnRlbGVmb25vcyxcclxuLmRpcmVjY2lvbmVzIHtcclxuICBtYXJnaW4tdG9wOiA0cmVtO1xyXG59XHJcblxyXG4uaG9yYXJpb3Mge1xyXG4gIC5ob3JhcmlvIHtcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCB2YXIoLS1jb2xvci1wcmltYXJpbyk7XHJcblxyXG4gICAgLmRpYTpub3QoOmxhc3Qtb2YtdHlwZSkgbGFiZWwge1xyXG4gICAgICBtYXJnaW4tcmlnaHQ6IDEuNXJlbTtcclxuICAgIH1cclxuXHJcbiAgICAvKiAuc2VsZWN0LFxyXG4gICAgc2VsZWN0IHtcclxuICAgICAgdHJhbnNpdGlvbjogbm9uZTtcclxuXHJcbiAgICAgICY6aG92ZXIge1xyXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLWNvbnRyYXN0ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAuc2VsZWN0IHtcclxuICAgICAgcGFkZGluZzogLjVyZW07XHJcblxyXG4gICAgICAmOjpiZWZvcmUge1xyXG4gICAgICAgIGZvbnQtZmFtaWx5OiBcIkZvbnQgQXdlc29tZSA1IEZyZWVcIjtcclxuICAgICAgICBjb250ZW50OiBcIlxcZjBkN1wiO1xyXG4gICAgICAgIGZvbnQtd2VpZ2h0OiA5MDA7XHJcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAuNXJlbTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNlbGVjdCB7XHJcbiAgICAgIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTtcclxuICAgICAgLW1vei1hcHBlYXJhbmNlOiBub25lO1xyXG4gICAgICBhcHBlYXJhbmNlOiBub25lO1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB1bnNldDtcclxuICAgICAgYm9yZGVyOiBub25lO1xyXG4gICAgICBvdXRsaW5lOiBub25lO1xyXG4gICAgfSAqL1xyXG4gIH1cclxufVxyXG5cclxuLnRlbGVmb25vcyAudGVsZWZvbm8ge1xyXG4gIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCB2YXIoLS1jb2xvci1wcmltYXJpbyk7XHJcblxyXG4gIGlucHV0IHtcclxuICAgIGZvbnQtc2l6ZTogdW5zZXQ7XHJcbiAgfVxyXG59XHJcblxyXG4uZGlyZWNjaW9uZXMgLmRpcmVjY2lvbiB7XHJcbiAgZGlzcGxheTogZ3JpZDtcclxuICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgyLCAxZnIpO1xyXG4gIGNvbHVtbi1nYXA6IDMuNXJlbTtcclxuXHJcbiAgJj5kaXYge1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMy41cmVtO1xyXG5cclxuICAgIC52YWxvciB7XHJcbiAgICAgIGJvcmRlcjogbm9uZTtcclxuICAgICAgb3V0bGluZTogbm9uZTtcclxuICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHZhcigtLWNvbG9yLXByaW1hcmlvKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcblxyXG5AbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcclxuICAuZGlyZWNjaW9uZXMgLmRpcmVjY2lvbiB7XHJcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjtcclxuICB9XHJcblxyXG4gIC50ZWxlZm9ub3MgLnRlbGVmb25vIHtcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuXHJcbiAgICBkaXYsXHJcbiAgICAuaW5wdCB7XHJcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIH1cclxuXHJcbiAgICBkaXYge1xyXG4gICAgICB3aWR0aDogMTAwJTtcclxuICAgIH1cclxuXHJcbiAgICBpIHtcclxuICAgICAgY29sb3I6IHZhcigtLWJzLXdoaXRlKTtcclxuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICByaWdodDogLjVyZW07XHJcbiAgICAgIHRvcDogLjdyZW07XHJcblxyXG4gICAgICAmOmhvdmVyIHtcclxuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItZ3JhbmF0ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcblxyXG5AbWVkaWEgKG1heC13aWR0aDogMTIwMHB4KSB7XHJcblxyXG4gIC5ob3JhcmlvcyAuaG9yYXJpbyB7XHJcbiAgICAuaG9yYXMsIC5ob3Jhcz5kaXYsIC5kaWFzIHtcclxuICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICB9XHJcblxyXG4gICAgLmhvcmFzLCAuZGlhcywgLmlucHQge1xyXG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICB9XHJcblxyXG4gICAgaSB7XHJcbiAgICAgIGNvbG9yOiB2YXIoLS1icy13aGl0ZSk7XHJcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgcmlnaHQ6IC41cmVtO1xyXG4gICAgICB0b3A6IC43cmVtO1xyXG5cclxuICAgICAgJjpob3ZlciB7XHJcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLWdyYW5hdGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["ContactoConfigComponent","constructor","ConfigService","SharedService","nombre","letra","ngOnInit","getHorarios","subscribe","resp","success","horarios","data","crearHorarioMostrar","getTelefonos","telefonos","getDirecciones","direcciones","guardar","tlfns","borrar","tBorrar","crearHorarioGuardar","updateContacto","mensaje","msg","actualizado","setTimeout","addTelefono","push","id","numero","extension","addHorario","listaDias","dSemana","forEach","dia","crearDia","addHorarioMostrar","deleteHorario","event","deleteTelefono","index","tlfn","splice","hGuardar","hBorrar","hMostrar","horario","dias","d","seleccionado","valor","hEntrada","hSalida","horas","diasHora","idDia","selecc","find","h","entrada","salida","hora","filter","hours","minutes","selectors","decls","vars","template","i0"],"sourceRoot":"","sources":["C:\\Users\\Alicia\\Documents\\Clase\\DAW\\Segundo\\Desafio3_DonantesSangre\\donantesSangrePuertollano\\front\\src\\app\\config\\contacto-config\\contacto-config.component.ts","C:\\Users\\Alicia\\Documents\\Clase\\DAW\\Segundo\\Desafio3_DonantesSangre\\donantesSangrePuertollano\\front\\src\\app\\config\\contacto-config\\contacto-config.component.html"],"sourcesContent":["import { Time } from '@angular/common';\r\nimport { Component } from '@angular/core';\r\nimport { Dia, Direccion, Horario, HorarioMostrar, Telefono, Hora, HorarioGuardar } from '../interfaces/config.interface';\r\nimport { ConfigService } from '../services/config.service';\r\nimport { SharedService } from 'src/app/shared/services/shared.service';\r\n\r\n@Component({\r\n  selector: 'app-contacto-config',\r\n  templateUrl: './contacto-config.component.html',\r\n  styleUrls: ['./contacto-config.component.scss']\r\n})\r\nexport class ContactoConfigComponent { //Todo hecho por Alicia\r\n\r\n  mensaje: String = '';\r\n  actualizado!: boolean;\r\n  telefonos: Telefono[] = [];\r\n  tBorrar: number[] = [];\r\n  direcciones: Direccion[] = [];\r\n  horarios: Horario[] = [];\r\n  hMostrar: HorarioMostrar[] = [];\r\n  dSemana = [{ nombre: \"Lunes\", letra: \"L\" }, { nombre: \"Martes\", letra: \"M\" }, { nombre: \"Miércoles\", letra: \"X\" },\r\n  { nombre: \"Jueves\", letra: \"J\" }, { nombre: \"Viernes\", letra: \"V\" }];\r\n\r\n  constructor(\r\n    private ConfigService: ConfigService,\r\n    private SharedService: SharedService\r\n  ) { }\r\n\r\n\r\n  ngOnInit() {\r\n    this.SharedService.getHorarios().subscribe(resp => {\r\n      if (resp.success) {\r\n        this.horarios = resp.data;\r\n        this.crearHorarioMostrar();\r\n      }\r\n    });\r\n\r\n\r\n    this.SharedService.getTelefonos().subscribe(resp => {\r\n      if (resp.success) this.telefonos = resp.data;\r\n    });\r\n\r\n\r\n    this.SharedService.getDirecciones().subscribe(resp => {\r\n      if (resp.success) this.direcciones = resp.data;\r\n    });\r\n  }\r\n\r\n\r\n  guardar() {\r\n    const tlfns = { guardar: this.telefonos, borrar: this.tBorrar };\r\n    const horarios = this.crearHorarioGuardar();\r\n\r\n    this.ConfigService.updateContacto(this.direcciones, tlfns, horarios)\r\n      .subscribe(resp => {\r\n\r\n        this.mensaje = resp.msg;\r\n        this.actualizado = (resp.success) ? true : false;\r\n\r\n        setTimeout(() => this.mensaje = '', 4000);\r\n      });\r\n  }\r\n\r\n\r\n  addTelefono() {\r\n    this.telefonos.push({\r\n      id: -1,\r\n      numero: \"\",\r\n      extension: 0\r\n    });\r\n  }\r\n\r\n\r\n  addHorario() {\r\n    let listaDias: Dia[] = [];\r\n\r\n    this.dSemana.forEach(dia => { //TODO: LLevar a función auxiliar\r\n      listaDias.push(this.crearDia(dia.nombre, dia.letra, false));\r\n    });\r\n\r\n    this.addHorarioMostrar(listaDias);\r\n  }\r\n\r\n\r\n  deleteHorario(event: Event) {\r\n\r\n  }\r\n\r\n\r\n  deleteTelefono(index: number) {\r\n    const tlfn = this.telefonos.splice(index, 1);\r\n    this.tBorrar.push(tlfn[0].id);\r\n  }\r\n\r\n\r\n  crearHorarioGuardar() {\r\n    let hGuardar: Horario[] = [];\r\n    let hBorrar: number[] = [];\r\n\r\n    this.hMostrar.forEach(horario => {\r\n\r\n      horario.dias.forEach(d => {\r\n\r\n        if (d.seleccionado) {\r\n          hGuardar.push({\r\n            id: d.id,\r\n            dia: d.valor,\r\n            hEntrada: horario.hEntrada,\r\n            hSalida: horario.hSalida,\r\n          });\r\n        } else if (d.id != -1) hBorrar.push(d.id);\r\n      })\r\n    });\r\n\r\n    return { guardar: hGuardar, borrar: hBorrar };\r\n  }\r\n\r\n\r\n  crearHorarioMostrar() {\r\n    let horas: Hora[] = [];\r\n    let diasHora: Horario[] = [];\r\n    let listaDias: Dia[];\r\n    let idDia: number | undefined;\r\n    let selecc: boolean;\r\n\r\n    this.horarios.forEach(horario => { // Recojo los distintos grupos de horas\r\n      if (!horas.find(h => h.entrada == horario.hEntrada && h.salida == horario.hSalida))\r\n        horas.push({ \"entrada\": horario.hEntrada, \"salida\": horario.hSalida });\r\n    });\r\n\r\n    horas.forEach(hora => { // Recojo los días que tienen ese grupo de horas\r\n      listaDias = [];\r\n      diasHora = this.horarios.filter(h => h.hEntrada == hora.entrada && h.hSalida == hora.salida);\r\n\r\n      this.dSemana.forEach(dia => {\r\n        idDia = diasHora.find(d => d.dia == dia.nombre)?.id;\r\n        selecc = (diasHora.find(d => d.dia == dia.nombre)) ? true : false;\r\n        listaDias.push(this.crearDia(dia.nombre, dia.letra, selecc, idDia));\r\n      });\r\n\r\n      this.addHorarioMostrar(listaDias, hora.entrada, hora.salida);\r\n    });\r\n  }\r\n\r\n\r\n  addHorarioMostrar(listaDias: Dia[], entrada: Time = { hours: 0, minutes: 0 }, salida: Time = { hours: 0, minutes: 0 }) {\r\n    this.hMostrar.push({\r\n      dias: listaDias,\r\n      hEntrada: entrada,\r\n      hSalida: salida\r\n    });\r\n  }\r\n\r\n\r\n  crearDia(valor:string, letra:string, selecc:boolean, id:number = -1) {\r\n    return {\r\n      id: id,\r\n      valor: valor,\r\n      letra: letra,\r\n      seleccionado: selecc\r\n    }\r\n  }\r\n}\r\n\r\n","<p>contacto-config works!</p>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}