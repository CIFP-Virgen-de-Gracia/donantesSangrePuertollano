{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Alicia/Documents/Clase/DAW/Segundo/Desafio3_DonantesSangre/donantesSangrePuertollano/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CommonModule } from '@angular/common';\nimport { NgbDatepickerModule } from '@ng-bootstrap/ng-bootstrap';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i2 from \"src/app/citas/services/citas.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nconst _c0 = [\"content\"];\nfunction ModalPedirCitaComponent_ng_template_0_h4_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h4\", 8);\n    i0.ɵɵtext(1, \"Inicio de sesi\\u00F3n necesario.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ModalPedirCitaComponent_ng_template_0_h4_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h4\", 8);\n    i0.ɵɵtext(1, \"Ya has pedido una cita.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ModalPedirCitaComponent_ng_template_0_p_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \" Es necesario que inicies sesi\\u00F3n para poder pedir cita. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ModalPedirCitaComponent_ng_template_0_p_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \" Solamente es posible reservar una cita a la vez. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ModalPedirCitaComponent_ng_template_0_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function ModalPedirCitaComponent_ng_template_0_button_7_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.irAlLogin());\n    });\n    i0.ɵɵtext(1, \"Iniciar sesi\\u00F3n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ModalPedirCitaComponent_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵtemplate(1, ModalPedirCitaComponent_ng_template_0_h4_1_Template, 2, 0, \"h4\", 2);\n    i0.ɵɵtemplate(2, ModalPedirCitaComponent_ng_template_0_h4_2_Template, 2, 0, \"h4\", 2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 3);\n    i0.ɵɵtemplate(4, ModalPedirCitaComponent_ng_template_0_p_4_Template, 2, 0, \"p\", 4);\n    i0.ɵɵtemplate(5, ModalPedirCitaComponent_ng_template_0_p_5_Template, 2, 0, \"p\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 5);\n    i0.ɵɵtemplate(7, ModalPedirCitaComponent_ng_template_0_button_7_Template, 2, 0, \"button\", 6);\n    i0.ɵɵelementStart(8, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ModalPedirCitaComponent_ng_template_0_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.atras());\n    });\n    i0.ɵɵtext(9, \"Atr\\u00E1s\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.registrado);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.registrado && ctx_r1.puedePedirCita);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.registrado);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.registrado && !ctx_r1.puedePedirCita);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.registrado);\n  }\n}\nexport class ModalPedirCitaComponent {\n  constructor(modalService, citasService, router) {\n    this.modalService = modalService;\n    this.citasService = citasService;\n    this.router = router;\n    this.closeResult = '';\n    this.registrado = false;\n    this.puedePedirCita = false;\n  }\n  ngAfterViewInit() {\n    this.openModal();\n  }\n  openModal() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      // const user = localStorage.getItem('user');\n      // let id: string;\n      // if (user) {\n      //   this.registrado = true;\n      //   id = JSON.parse(user).id;\n      //   const resp = await firstValueFrom(this.citasService.compHaPedidoCita(id));\n      //   this.puedePedirCita = resp.success;\n      // }\n      // else {\n      //   this.registrado = false;\n      // }\n      // if (!this.registrado || !this.puedePedirCita) {\n      //   this.modalService.open(this.content, { centered: true });\n      // }\n      _this.modalService.open(_this.content, {\n        centered: true\n      });\n    })();\n  }\n  open(content) {\n    this.modalService.open(content, {\n      ariaLabelledBy: 'modal-basic-title',\n      backdrop: 'static',\n      keyboard: false\n    }).result.then(result => {\n      this.closeResult = `Closed with: ${result}`;\n    });\n  }\n  irAlLogin() {\n    this.router.navigate(['/auth/login']);\n    this.modalService.dismissAll();\n  }\n  atras() {\n    this.modalService.dismissAll();\n  }\n}\nModalPedirCitaComponent.ɵfac = function ModalPedirCitaComponent_Factory(t) {\n  return new (t || ModalPedirCitaComponent)(i0.ɵɵdirectiveInject(i1.NgbModal), i0.ɵɵdirectiveInject(i2.CitasService), i0.ɵɵdirectiveInject(i3.Router));\n};\nModalPedirCitaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ModalPedirCitaComponent,\n  selectors: [[\"app-modal-pedir-cita\"]],\n  viewQuery: function ModalPedirCitaComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.content = _t.first);\n    }\n  },\n  standalone: true,\n  features: [i0.ɵɵStandaloneFeature],\n  decls: 5,\n  vars: 1,\n  consts: [[\"content\", \"\"], [1, \"modal-header\"], [\"class\", \"modal-title titulo\", \"id\", \"modal-basic-title\", 4, \"ngIf\"], [1, \"modal-body\", \"px-1\", \"py-5\", \"px-md-3\", \"p-lg-5\"], [4, \"ngIf\"], [1, \"modal-footer\", \"border-0\"], [\"type\", \"button\", \"class\", \"btn btn-primario\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"btn\", \"btn-secundario\", 3, \"click\"], [\"id\", \"modal-basic-title\", 1, \"modal-title\", \"titulo\"], [\"type\", \"button\", 1, \"btn\", \"btn-primario\", 3, \"click\"]],\n  template: function ModalPedirCitaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ModalPedirCitaComponent_ng_template_0_Template, 10, 5, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelement(2, \"hr\");\n      i0.ɵɵelementStart(3, \"pre\");\n      i0.ɵɵtext(4);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(ctx.closeResult);\n    }\n  },\n  dependencies: [NgbDatepickerModule, CommonModule, i4.NgIf],\n  styles: [\".modal-backdrop.fade[_ngcontent-%COMP%] {\\n  opacity: 0 !important;\\n  transition: none !important;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2hhcmVkL21vZGFsLXBlZGlyLWNpdGEvbW9kYWwtcGVkaXItY2l0YS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHFCQUFBO0VBQ0EsMkJBQUE7QUFDSiIsInNvdXJjZXNDb250ZW50IjpbIi5tb2RhbC1iYWNrZHJvcC5mYWRlIHtcclxuICAgIG9wYWNpdHk6IDAgIWltcG9ydGFudDtcclxuICAgIHRyYW5zaXRpb246IG5vbmUgIWltcG9ydGFudDtcclxuICB9Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";AACA,SAASA,YAAY,QAAQ,iBAAiB;AAE9C,SAASC,mBAAmB,QAAkB,4BAA4B;;;;;;;;;ICDxEC,6BACmD;IAAAA,gDAA2B;IAAAA,iBAAK;;;;;IACnFA,6BACmD;IAAAA,uCAAuB;IAAAA,iBAAK;;;;;IAG/EA,yBAA4B;IAC3BA,6EACD;IAAAA,iBAAI;;;;;IAEJA,yBAAmD;IAClDA,kEACD;IAAAA,iBAAI;;;;;;IAGJA,iCAC8D;IAAtBA;MAAAA;MAAA;MAAA,OAASA,iCAAW;IAAA,EAAC;IAACA,mCAAc;IAAAA,iBAAS;;;;;;IAjBtFA,8BAA0B;IACzBA,oFACmF;IACnFA,oFAC+E;IAChFA,iBAAM;IACNA,8BAAiD;IAChDA,kFAEI;IAEJA,kFAEI;IACLA,iBAAM;IACNA,8BAAmC;IAClCA,4FACqF;IAC/EA,iCAAmE;IAAlBA;MAAAA;MAAA;MAAA,OAASA,8BAAO;IAAA,EAAC;IAACA,0BAAK;IAAAA,iBAAS;;;;IAjBlFA,eAAsB;IAAtBA,yCAAsB;IAEtBA,eAA4C;IAA5CA,iEAA4C;IAI7CA,eAAsB;IAAtBA,yCAAsB;IAItBA,eAA6C;IAA7CA,kEAA6C;IAKxCA,eAAsB;IAAtBA,yCAAsB;;;ADFjC,OAAM,MAAOC,uBAAuB;EAOlCC,YACUC,YAAsB,EACtBC,YAA0B,EAC1BC,MAAc;IAFd,iBAAY,GAAZF,YAAY;IACZ,iBAAY,GAAZC,YAAY;IACZ,WAAM,GAANC,MAAM;IAThB,gBAAW,GAAG,EAAE;IAChB,eAAU,GAAG,KAAK;IAClB,mBAAc,GAAG,KAAK;EAOK;EAG3BC,eAAe;IACb,IAAI,CAACC,SAAS,EAAE;EAClB;EAEMA,SAAS;IAAA;IAAA;MAEb;MAGA;MACA;MACA;MACA;MAEA;MAEA;MACA;MACA;MACA;MACA;MAGA;MACA;MACA;MAEA,KAAI,CAACJ,YAAY,CAACK,IAAI,CAAC,KAAI,CAACC,OAAO,EAAE;QAAEC,QAAQ,EAAE;MAAI,CAAE,CAAC;IAAC;EAC3D;EAEDF,IAAI,CAACC,OAAY;IACd,IAAI,CAACN,YAAY,CAACK,IAAI,CAACC,OAAO,EAAE;MAAEE,cAAc,EAAE,mBAAmB;MAAEC,QAAQ,EAAE,QAAQ;MAAEC,QAAQ,EAAE;IAAK,CAAE,CAAC,CAACC,MAAM,CAACC,IAAI,CACtHD,MAAM,IAAI;MACT,IAAI,CAACE,WAAW,GAAG,gBAAgBF,MAAM,EAAE;IAC7C,CAAC,CACF;EACJ;EAGCG,SAAS;IACP,IAAI,CAACZ,MAAM,CAACa,QAAQ,CAAC,CAAC,aAAa,CAAC,CAAC;IACrC,IAAI,CAACf,YAAY,CAACgB,UAAU,EAAE;EAChC;EAEAC,KAAK;IACH,IAAI,CAACjB,YAAY,CAACgB,UAAU,EAAE;EAChC;;AA3DWlB,uBAAuB;mBAAvBA,uBAAuB;AAAA;AAAvBA,uBAAuB;QAAvBA,uBAAuB;EAAAoB;EAAAC;IAAA;;;;;;;;;;;;;;;MCfpCtB,0HAqBc;MAGdA,qBAAK;MAELA,2BAAK;MAAAA,YAAiB;MAAAA,iBAAM;;;MAAvBA,eAAiB;MAAjBA,qCAAiB;;;iBDfXD,mBAAmB,EAAED,YAAY;EAAAyB;AAAA","names":["CommonModule","NgbDatepickerModule","i0","ModalPedirCitaComponent","constructor","modalService","citasService","router","ngAfterViewInit","openModal","open","content","centered","ariaLabelledBy","backdrop","keyboard","result","then","closeResult","irAlLogin","navigate","dismissAll","atras","selectors","viewQuery","styles"],"sourceRoot":"","sources":["C:\\Users\\Alicia\\Documents\\Clase\\DAW\\Segundo\\Desafio3_DonantesSangre\\donantesSangrePuertollano\\front\\src\\app\\shared\\modal-pedir-cita\\modal-pedir-cita.component.ts","C:\\Users\\Alicia\\Documents\\Clase\\DAW\\Segundo\\Desafio3_DonantesSangre\\donantesSangrePuertollano\\front\\src\\app\\shared\\modal-pedir-cita\\modal-pedir-cita.component.html"],"sourcesContent":["import { Component, ElementRef, ViewChild } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Router } from '@angular/router';\r\nimport { NgbDatepickerModule, NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { CitasService } from 'src/app/citas/services/citas.service';\r\nimport { RegistroComponent } from 'src/app/auth/registro/registro.component';\r\nimport { firstValueFrom } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-modal-pedir-cita',\r\n  standalone: true,\r\n\timports: [NgbDatepickerModule, CommonModule],\r\n  templateUrl: './modal-pedir-cita.component.html',\r\n  styleUrls: ['./modal-pedir-cita.component.scss']\r\n})\r\nexport class ModalPedirCitaComponent {\r\n  closeResult = '';\r\n  registrado = false;\r\n  puedePedirCita = false;\r\n\r\n  @ViewChild('content') content!: ElementRef;\r\n\t\r\n  constructor(\r\n    private modalService: NgbModal,\r\n    private citasService: CitasService,\r\n    private router: Router) {}\r\n\r\n\r\n  ngAfterViewInit() {\r\n    this.openModal();\r\n  }\r\n\r\n  async openModal(){\r\n\r\n    // const user = localStorage.getItem('user');\r\n\r\n\r\n    // let id: string;\r\n    // if (user) {\r\n    //   this.registrado = true;\r\n    //   id = JSON.parse(user).id;\r\n\r\n    //   const resp = await firstValueFrom(this.citasService.compHaPedidoCita(id));\r\n      \r\n    //   this.puedePedirCita = resp.success;\r\n    // }\r\n    // else {\r\n    //   this.registrado = false;\r\n    // }\r\n\r\n\r\n    // if (!this.registrado || !this.puedePedirCita) {\r\n    //   this.modalService.open(this.content, { centered: true });\r\n    // }\r\n\r\n    this.modalService.open(this.content, { centered: true });\r\n  }\r\n\r\n\topen(content: any) {\r\n    this.modalService.open(content, { ariaLabelledBy: 'modal-basic-title', backdrop: 'static', keyboard: false }).result.then(\r\n      (result) => {\r\n        this.closeResult = `Closed with: ${result}`;\r\n      }\r\n    );\r\n\t}\r\n\r\n\r\n  irAlLogin() {\r\n    this.router.navigate(['/auth/login']);\r\n    this.modalService.dismissAll();\r\n  }\r\n\r\n  atras() {\r\n    this.modalService.dismissAll();\r\n  }\r\n\r\n}\r\n","<ng-template #content let-modal>\r\n\t<div class=\"modal-header\">\r\n\t\t<h4 *ngIf=\"!this.registrado\"\r\n\t\t\tclass=\"modal-title titulo\" id=\"modal-basic-title\">Inicio de sesión necesario.</h4>\r\n\t\t<h4 *ngIf=\"this.registrado && this.puedePedirCita\"\r\n\t\t\tclass=\"modal-title titulo\" id=\"modal-basic-title\">Ya has pedido una cita.</h4>\r\n\t</div>\r\n\t<div class=\"modal-body px-1 py-5 px-md-3 p-lg-5\">\r\n\t\t<p *ngIf=\"!this.registrado\">\r\n\t\t\tEs necesario que inicies sesión para poder pedir cita.\r\n\t\t</p>\r\n\r\n\t\t<p *ngIf=\"this.registrado && !this.puedePedirCita\">\r\n\t\t\tSolamente es posible reservar una cita a la vez.\r\n\t\t</p>\r\n\t</div>\r\n\t<div class=\"modal-footer border-0\">\r\n\t\t<button *ngIf=\"!this.registrado\"\r\n\t\t\ttype=\"button\" class=\"btn btn-primario\" (click)=\"irAlLogin()\">Iniciar sesión</button>\r\n        <button type=\"button\" class=\"btn btn-secundario\" (click)=\"atras()\">Atrás</button>\r\n\t</div>\r\n</ng-template>\r\n\r\n\r\n<hr/>\r\n\r\n<pre>{{ closeResult }}</pre>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}